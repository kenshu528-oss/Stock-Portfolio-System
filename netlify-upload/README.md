# 存股紀錄系統

一個整合真實台股股價 API 的網頁版存股紀錄系統，幫助你追蹤多個帳戶的股票投資組合。

## 功能特色

- ✅ 多帳戶管理 (新增/刪除/重新命名)
- ✅ 股票新增/刪除
- ✅ **真實股價 API 整合** (Yahoo Finance + 台灣證交所 + Investing.com)
- ✅ 自動股票名稱查詢
- ✅ 多重資料源備援機制
- ✅ 損益計算和損益率
- ✅ **完整股息管理系統** 📊
  - 股息記錄與統計
  - 自動調整成本價
  - 真實報酬率計算
  - 股息殖利率分析
  - **購買日期追蹤與自動股息計算** 🎯
- ✅ **多次買入支援** 🔄
  - 同股票可多次新增
  - 智能合併或獨立記錄
  - 購買歷史完整追蹤
  - 平均成本價自動計算
- ✅ 每日變化追蹤
- ✅ 個別股票手動更新
- ✅ 即時編輯股數和成本價
- ✅ 批量編輯功能
- ✅ 雲端同步 (跨裝置資料同步)
- ✅ **版本管理系統** (自動更新提醒)
- ✅ 響應式設計 (手機/平板友善)
- ✅ **雙隱私保護模式** 🔒
  - 總市值隱私開關 (預設隱藏)
  - 個股金額隱私開關 (預設顯示)
  - 獨立控制，靈活使用
- ✅ 深色模式支援
- ✅ 本地資料儲存

## 股價資料來源

系統會按優先順序嘗試以下 API：

1. **Yahoo Finance** - 主要資料源，涵蓋範圍廣
2. **Investing.com** - 備用資料源
3. **台灣證交所 (TWSE)** - 官方資料，但僅限交易日

每個股票會顯示資料來源和最後更新時間，確保資料透明度。

## 使用方法

### 基本操作
1. 直接開啟 `index.html` 檔案
2. 點擊「新增股票」按鈕新增持股
   - 股票代碼會自動轉為大寫
   - 如果不填股票名稱，系統會自動查詢
3. 點擊「新增帳戶」按鈕新增更多帳戶
4. 點擊「管理帳戶」可以重新命名或刪除帳戶
5. 系統會自動每30秒更新股價
6. 可手動點擊「更新股價」按鈕立即更新
7. 每支股票旁有🔄按鈕可單獨更新
8. 點擊股數或成本價可直接編輯
9. 點擊版本號可查看更新歷史

### 股息管理 💰
1. 點擊「股息管理」按鈕開啟股息管理系統
2. **股息記錄頁面**：查看所有股息記錄和統計資料
3. **新增股息頁面**：記錄新的股息收入
   - 選擇股票和除息日期
   - 輸入每股股息金額
   - 系統自動計算扣稅和淨收入
4. **設定頁面**：管理股息調整成本價功能
5. 點擊表格中的 💰 按鈕可快速查看個股股息記錄

### 購買追蹤與自動股息計算 🎯
1. **新增股票時**：
   - 必須填入購買日期（預設今天）
   - 系統自動根據購買日期計算歷史股息
   - 支援台積電、鴻海、聯發科、元大台灣50等熱門股票
2. **多次買入**：
   - 新增相同股票時，系統會詢問是否合併
   - 選擇合併：自動計算平均成本價
   - 選擇獨立：保持為兩筆獨立記錄
3. **購買歷史**：點擊操作選單中的 📋 按鈕查看完整購買歷史

### 進階功能
- **雙隱私保護**：
  - 總市值隱私：點擊總市值旁的 🙈 按鈕控制
  - 個股隱私：點擊表格「市值」欄位中的 👁️ 按鈕控制
  - 可獨立開關，適應不同使用場景
- **深色模式**：點擊 🌙 按鈕切換深色主題
- **介面模式**：點擊 📱 按鈕切換手機/桌面版介面
- **雲端同步**：設定 GitHub Token 實現跨裝置同步

## 支援的股票類型

- 台股上市股票 (如: 2330, 2317)
- 台股 ETF (如: 0050, 0056, 00631L)
- 系統會自動識別並使用正確的 API 格式

## 技術特色

- **多重 API 備援**: 如果主要 API 失敗，自動切換到備用 API
- **CORS 代理**: 解決瀏覽器跨域限制
- **錯誤處理**: 詳細的錯誤訊息和狀態指示
- **超時控制**: 避免 API 請求卡住
- **快取機制**: 減少不必要的 API 呼叫

## 注意事項

- 股價更新需要網路連線
- 部分 API 在非交易時間可能回傳前一交易日收盤價
- 如果所有 API 都失敗，會保持上次的價格
- 建議在交易時間使用以獲得最即時的資料

## 檔案結構

- `index.html` - 主要介面
- `script.js` - 核心邏輯
- `stock-api.js` - 股價 API 整合模組
- `cloud-sync.js` - 雲端同步模組
- `version.js` - 版本管理系統
- `version.js` - 版本管理系統
- `styles.css` - 樣式設計
- `README.md` - 說明文件
- `DEPLOYMENT.md` - 部署指南
- `LICENSE` - 授權條款
- `COPYRIGHT.md` - 版權保護指南

## 📄 版權資訊

**存股紀錄系統 (Stock Portfolio System)**  
版權所有 © 2025 徐國洲

本專案採用 [CC BY-NC 4.0 License](LICENSE) 授權條款。

### 🏷️ 授權說明
- ✅ 允許個人使用、修改、分發
- ✅ 允許非營利組織使用
- ❌ **禁止商業使用**
- ⚠️ 必須保留版權聲明和授權條款
- ⚠️ 不提供任何形式的擔保

### 📧 聯絡方式
- Email: kenshu528@gmail.com
- GitHub: https://github.com/kenshu528-oss

### ⚖️ 免責聲明
本軟體僅供個人投資記錄使用，不構成投資建議。股價資料來源於第三方 API，準確性請自行驗證。使用者需自行承擔投資風險。

## 📤 分享給他人使用

### 🌐 線上分享（推薦）
**Netlify Drop - 最簡單的方法**：
1. 前往 https://app.netlify.com/drop
2. 將專案資料夾拖拉到頁面上
3. 獲得免費網址，直接分享給朋友使用
4. 詳細教學請參閱 `NETLIFY_DROP_TUTORIAL.md`

### 📁 檔案分享
**Google Drive / Dropbox**：
1. 將專案打包成 ZIP 檔案
2. 上傳到雲端儲存
3. 分享下載連結
4. 朋友下載後雙擊 `index.html` 即可使用

### 💾 本地分享
**USB 隨身碟**：
1. 將專案複製到 USB
2. 直接給朋友使用
3. 適合面對面分享

**更多分享方法請參閱**：
- `SIMPLE_SHARING_GUIDE.md` - 3種最簡單的分享方法
- `ALTERNATIVE_SHARING_METHODS.md` - 完整的分享方案指南

## 🤝 貢獻指南

歡迎提交 Issue 和 Pull Request！

### 貢獻方式：
1. Fork 本專案
2. 建立功能分支
3. 提交變更
4. 發起 Pull Request

### 貢獻者：
- 徐國洲 - 原始作者

---

## 版本歷史

### v1.2.0.1 (2025-12-24) - Bug 修正版
- 🐛 修正新增股票對話框滾動問題
- 🐛 防止自動更新干擾新增股票流程
- ✨ 新增智能股票搜尋功能
- 🐛 修正股票名稱自動查詢 (如 2303 → 聯電)
- 🔧 改善錯誤處理和用戶提示
- 🎨 調整版權資訊顯示位置

### v1.2.0.0 (2025-12-24) - 主要功能版
- ✅ 雲端同步功能
- ✅ 跨裝置資料同步
- ✅ 版本管理系統
- ✅ 帳戶管理功能 (刪除/更名)
- ✅ 部署指南

## 版本歷史

### v1.2.2.0 (2025-12-30) 📚 - 版權保護與文檔完善版
- ⚖️ **版權保護升級**
  - 從 MIT License 更改為 CC BY-NC 4.0 License
  - 明確禁止商業使用，允許個人使用
  - 新增商業使用聲明文件 (COMMERCIAL_USE_NOTICE.md)
  - 程式碼中加入商業使用檢測警告
  - 更新所有檔案的版權聲明
- 📚 **完整文檔套件**
  - GitHub 上傳標準作業程序 (GITHUB_UPLOAD_SOP.md)
  - 快速參考卡 (GITHUB_UPLOAD_QUICK_REFERENCE.md)
  - 疑難排解指南 (TROUBLESHOOTING_GUIDE.md)
  - 詳細的步驟說明和常見問題解決方案
- 🔒 **版權資訊更新**
  - 網頁版權資訊顯示更新
  - 版權資訊彈窗內容更新
  - 包含完整授權條款連結
- 🛡️ **保護機制強化**
  - 控制台商業使用警告
  - 違規舉報機制
  - 商業授權諮詢管道

### v1.2.1.0 (2025-12-30) 🎉 - 股息管理與隱私保護版
- ✨ **完整股息管理系統**
  - 股息記錄與統計功能
  - 自動調整成本價機制
  - 真實報酬率計算 (含股息)
  - 股息殖利率分析
  - 個股股息設定管理
- 📊 新增「股息收入」和「總報酬」欄位
- 💰 新增股息管理按鈕和快速查看功能
- 🔧 成本價欄位顯示調整後價格
- 📈 完整的股息統計和預覽計算
- 🎨 **UI 界面優化**
  - 預設帳戶更名為「帳戶1」、「帳戶2」
  - 操作欄位改為下拉選單設計 (⚙️ ▼)
  - 更整潔的表格界面
  - 手機友善的操作體驗
- 🔒 **雙隱私保護系統**
  - 總市值隱私開關 (預設隱藏)
  - 個股金額隱私開關 (預設顯示)
  - 獨立控制，靈活使用
  - 智能隱私提示訊息
- 🎯 **購買追蹤與自動股息計算**
  - 購買日期記錄與追蹤
  - 多次買入智能合併
  - 內建股息歷史資料庫
  - 自動計算應得股息收入

### v1.2.0.3 (2025-12-24) - 深色模式版
- 🌙 新增深色模式功能
- 🎨 支援亮色/深色主題切換
- 🌃 改善夜間使用體驗
- 💾 自動記憶使用者偏好設定

### v1.2.0.0 (2025-12-24) - 主要功能版
- ☁️ 雲端同步功能
- 🔄 跨裝置資料同步
- 📋 版本管理系統
- 🏷️ 帳戶管理功能 (刪除/更名)
- 📖 部署指南

### v1.1.0.0 (2025-12-24) - API 整合版
- 🌐 真實股價 API 整合
- 🔄 多重資料源備援
- ✏️ 即時編輯股數和成本價
- 📝 批量編輯功能
- 🔄 個別股票更新

### v1.0.0.0 (2025-12-24) - 初始版本
- 📊 基本股票管理功能
- 👥 多帳戶支援
- 💹 即時股價更新
- 💰 損益計算
  - 自動計算應得股息收入

### v1.2.0.3 (2025-12-24)
- 🌙 新增深色模式功能
- 🎨 支援亮色/深色主題切換
- 🌃 改善夜間使用體驗
- 💾 自動記憶使用者偏好設定

### v1.2.0.0 (2025-12-24)
- ☁️ 雲端同步功能
- 🔄 跨裝置資料同步
- 📋 版本管理系統
- 🏷️ 帳戶管理功能 (刪除/更名)
- 📖 部署指南

### v1.1.0.0 (2025-12-24)
- 🌐 真實股價 API 整合
- 🔄 多重資料源備援
- ✏️ 即時編輯股數和成本價
- 📝 批量編輯功能
- 🔄 個別股票更新

### v1.0.0.0 (2025-12-24)
- 📊 基本股票管理功能
- 👥 多帳戶支援
- 💹 即時股價更新
- 💰 損益計算

## 技術特色

- **前端技術**：純 HTML5 + CSS3 + JavaScript (ES6+)
- **資料儲存**：localStorage (本地) + GitHub Gist (雲端)
- **API 整合**：多重股價資料源
- **響應式設計**：支援手機、平板、桌面
- **版本管理**：自動資料遷移機制
- **隱私保護**：本地優先，可選雲端同步

## 開發者資訊

- **作者**：徐國洲
- **授權**：CC BY-NC 4.0 License (非商業使用)
- **版本**：v1.2.2.0
- **更新日期**：2025-12-30

---

💡 **提示**：
- 開啟 `dividend-test.html` 可查看股息管理功能的詳細測試指南
- 開啟 `ui-improvements-test.html` 可查看最新的 UI 改進說明
- 開啟 `privacy-controls-test.html` 可查看雙隱私開關功能說明
- 開啟 `purchase-tracking-test.html` 可查看購買追蹤與自動股息計算功能
- 開啟 `privacy-fix-test.html` 可查看隱私開關修復說明
- 開啟 `privacy-star-fix.html` 可查看日間模式星號修復說明
- 開啟 `action-menu-fix.html` 可查看操作選單修復說明
- 開啟 `account-reset-improvements.html` 可查看帳戶管理與重置功能改進
- 開啟 `clean-start-improvement.html` 可查看乾淨啟動改進說明