# Stock Portfolio System å®Œæ•´è¦æ ¼æ–‡æª”

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

### åŸºæœ¬è³‡è¨Š
- **å°ˆæ¡ˆåç¨±**: Stock Portfolio System
- **ç•¶å‰ç‰ˆæœ¬**: v1.0.2.0340
- **é¡å‹**: ç¾ä»£åŒ–è‚¡ç¥¨æŠ•è³‡çµ„åˆç®¡ç†ç³»çµ±
- **æŠ€è¡“æ£§**: React 18 + TypeScript + Vite + Zustand + TailwindCSS
- **ç›®æ¨™ç”¨æˆ¶**: å€‹äººæŠ•è³‡è€…ã€è‚¡ç¥¨äº¤æ˜“å“¡
- **éƒ¨ç½²ç’°å¢ƒ**: æœ¬æ©Ÿç«¯é–‹ç™¼ + é›²ç«¯ç”Ÿç”¢ç’°å¢ƒ

### å°ˆæ¡ˆç›®æ¨™
æä¾›ä¸€å€‹åŠŸèƒ½å®Œæ•´ã€ç”¨æˆ¶å‹å¥½çš„è‚¡ç¥¨æŠ•è³‡çµ„åˆç®¡ç†ç³»çµ±ï¼Œæ”¯æ´å¤šå¸³æˆ¶ç®¡ç†ã€å³æ™‚è‚¡åƒ¹æ›´æ–°ã€é™¤æ¬Šæ¯è¨ˆç®—ã€é›²ç«¯åŒæ­¥ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚ç³»çµ±è¨­è¨ˆç‚ºæœ¬æ©Ÿç«¯å’Œé›²ç«¯é›™ç’°å¢ƒé‹è¡Œï¼Œç¢ºä¿åœ¨ä¸åŒç’°å¢ƒä¸‹éƒ½èƒ½æä¾›æœ€ä½³çš„ç”¨æˆ¶é«”é©—ã€‚

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

### æ•´é«”æ¶æ§‹åœ–
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Stock Portfolio System                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å‰ç«¯æ‡‰ç”¨ (React + TypeScript + Vite + Zustand)            â”‚
â”‚  â”œâ”€â”€ ç”¨æˆ¶ä»‹é¢å±¤ (UI Components)                             â”‚
â”‚  â”œâ”€â”€ ç‹€æ…‹ç®¡ç†å±¤ (Zustand Store)                            â”‚
â”‚  â”œâ”€â”€ æœå‹™å±¤ (API Services)                                 â”‚
â”‚  â””â”€â”€ å·¥å…·å±¤ (Utils & Helpers)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    ç’°å¢ƒé©é…å±¤                                â”‚
â”‚  â”œâ”€â”€ æœ¬æ©Ÿç«¯ç’°å¢ƒ (localhost:5173)                           â”‚
â”‚  â””â”€â”€ é›²ç«¯ç’°å¢ƒ (GitHub Pages / Netlify)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    å¾Œç«¯æœå‹™å±¤                                â”‚
â”‚  â”œâ”€â”€ æœ¬æ©Ÿç«¯å¾Œç«¯ (Node.js Express - localhost:3001)        â”‚
â”‚  â”œâ”€â”€ Netlify Functions (é›²ç«¯ç„¡æœå‹™å™¨å‡½æ•¸)                   â”‚
â”‚  â””â”€â”€ å¤–éƒ¨ API æœå‹™                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    è³‡æ–™ä¾†æºå±¤                                â”‚
â”‚  â”œâ”€â”€ Yahoo Finance API (ä¸»è¦è‚¡åƒ¹ä¾†æº)                      â”‚
â”‚  â”œâ”€â”€ FinMind API (å°è‚¡å°ˆç”¨è³‡æ–™)                             â”‚
â”‚  â”œâ”€â”€ å°ç£è­‰äº¤æ‰€ OpenAPI (å®˜æ–¹è³‡æ–™)                          â”‚
â”‚  â””â”€â”€ GitHub Gist API (é›²ç«¯åŒæ­¥)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å‰ç«¯æŠ€è¡“æ£§
```
React 18              - UI æ¡†æ¶ï¼Œæ”¯æ´ Concurrent Features
TypeScript            - é¡å‹å®‰å…¨ï¼Œæå‡é–‹ç™¼é«”é©—
Vite                  - ç¾ä»£åŒ–å»ºç½®å·¥å…·ï¼Œå¿«é€Ÿç†±é‡è¼‰
Zustand               - è¼•é‡ç´šç‹€æ…‹ç®¡ç†ï¼Œæ”¯æ´æŒä¹…åŒ–
TailwindCSS           - åŸå­åŒ– CSS æ¡†æ¶
Vitest                - å–®å…ƒæ¸¬è©¦æ¡†æ¶
ESLint + Prettier     - ä»£ç¢¼å“è³ªæ§åˆ¶
```

### å¾Œç«¯æœå‹™æ¶æ§‹
```
æœ¬æ©Ÿç«¯å¾Œç«¯æœå‹™:
â”œâ”€â”€ Node.js Express Server (localhost:3001)
â”‚   â”œâ”€â”€ CORS æ”¯æ´
â”‚   â”œâ”€â”€ è‚¡åƒ¹ API ä»£ç†
â”‚   â”œâ”€â”€ å¿«å–æ©Ÿåˆ¶
â”‚   â””â”€â”€ éŒ¯èª¤è™•ç†

é›²ç«¯ç„¡æœå‹™å™¨å‡½æ•¸:
â”œâ”€â”€ Netlify Functions
â”‚   â”œâ”€â”€ /stock - è‚¡åƒ¹æŸ¥è©¢
â”‚   â”œâ”€â”€ /stock-search - è‚¡ç¥¨æœå°‹
â”‚   â”œâ”€â”€ /dividend - é™¤æ¬Šæ¯æŸ¥è©¢
â”‚   â””â”€â”€ /health - å¥åº·æª¢æŸ¥
```

---

## ğŸŒ ç’°å¢ƒæ¶æ§‹èˆ‡å·¥ä½œæ©Ÿåˆ¶

### æœ¬æ©Ÿç«¯ç’°å¢ƒ (Development Environment)

#### ç’°å¢ƒç‰¹å¾µ
- **å‰ç«¯**: `http://localhost:5173` (Vite Dev Server)
- **å¾Œç«¯**: `http://localhost:3001` (Node.js Express Server)
- **æª¢æ¸¬æ–¹å¼**: `window.location.hostname === 'localhost'`
- **å„ªå‹¢**: ç„¡ CORS é™åˆ¶ï¼Œå®Œæ•´åŠŸèƒ½ï¼Œå¿«é€Ÿé–‹ç™¼

#### å·¥ä½œæ©Ÿåˆ¶
```typescript
// æœ¬æ©Ÿç«¯ç’°å¢ƒæª¢æ¸¬
const isLocalhost = window.location.hostname === 'localhost' || 
                   window.location.hostname === '127.0.0.1';

if (isLocalhost) {
  // ä½¿ç”¨æœ¬æ©Ÿç«¯å¾Œç«¯ä»£ç†
  const apiUrl = 'http://localhost:3001/api/stock/2330';
  // å¾Œç«¯ä»£ç†æœƒèª¿ç”¨ Yahoo Finance API ä¸¦è¿”å›çµæœ
}
```

#### è‚¡åƒ¹ç²å–æµç¨‹
```
ç”¨æˆ¶è«‹æ±‚è‚¡åƒ¹
    â†“
å‰ç«¯èª¿ç”¨æœ¬æ©Ÿç«¯å¾Œç«¯ API (localhost:3001)
    â†“
å¾Œç«¯ä»£ç†èª¿ç”¨ Yahoo Finance API
    â†“
å¾Œç«¯è™•ç†ä¸¦å¿«å–çµæœ
    â†“
è¿”å›è‚¡åƒ¹è³‡æ–™çµ¦å‰ç«¯
    â†“
å‰ç«¯é¡¯ç¤ºè‚¡åƒ¹ (ä¾†æº: Yahoo)
```

#### æœ¬æ©Ÿç«¯å¾Œç«¯æœå‹™åŠŸèƒ½
- **è‚¡åƒ¹ä»£ç†**: ä»£ç† Yahoo Finance API è«‹æ±‚
- **CORS è™•ç†**: è§£æ±ºè·¨åŸŸå•é¡Œ
- **å¿«å–æ©Ÿåˆ¶**: 5ç§’å¿«å–é¿å…é‡è¤‡è«‹æ±‚
- **éŒ¯èª¤è™•ç†**: å„ªé›…è™•ç† API å¤±æ•—
- **æ—¥èªŒè¨˜éŒ„**: è©³ç´°çš„è«‹æ±‚æ—¥èªŒ

### é›²ç«¯ç’°å¢ƒ (Production Environment)

#### ç’°å¢ƒç‰¹å¾µ
- **GitHub Pages**: `https://username.github.io/repository`
- **Netlify**: `https://app-name.netlify.app`
- **æª¢æ¸¬æ–¹å¼**: `!window.location.hostname.includes('localhost')`
- **é™åˆ¶**: CORS é™åˆ¶ï¼Œéœ€è¦ä»£ç†æœå‹™

#### å·¥ä½œæ©Ÿåˆ¶
```typescript
// é›²ç«¯ç’°å¢ƒæª¢æ¸¬
const isGitHubPages = window.location.hostname.includes('github.io');

if (isGitHubPages) {
  // GitHub Pages ä½¿ç”¨ Netlify Functions ä½œç‚ºä»£ç†
  const apiUrl = 'https://stock-portfolio-system.netlify.app/.netlify/functions/stock?symbol=2330';
} else {
  // Netlify ç’°å¢ƒä½¿ç”¨ç›¸å°è·¯å¾‘
  const apiUrl = '/.netlify/functions/stock?symbol=2330';
}
```

#### è‚¡åƒ¹ç²å–æµç¨‹
```
ç”¨æˆ¶è«‹æ±‚è‚¡åƒ¹
    â†“
å‰ç«¯èª¿ç”¨ Netlify Functions
    â†“
Netlify Functions èª¿ç”¨å¤šå€‹ API:
â”œâ”€â”€ Yahoo Finance API (å„ªå…ˆ)
â”œâ”€â”€ FinMind API (å‚™æ´)
â””â”€â”€ è­‰äº¤æ‰€ API (æœ€å¾Œå‚™æ´)
    â†“
è¿”å›è‚¡åƒ¹è³‡æ–™çµ¦å‰ç«¯
    â†“
å‰ç«¯é¡¯ç¤ºè‚¡åƒ¹ (ä¾†æº: Yahoo Finance (Netlify))
```

#### Netlify Functions åŠŸèƒ½
- **å¤šé‡ API å‚™æ´**: Yahoo Finance â†’ FinMind â†’ è­‰äº¤æ‰€
- **æ™ºèƒ½å¾Œç¶´åˆ¤æ–·**: è‡ªå‹•åˆ¤æ–· .TW æˆ– .TWO
- **éŒ¯èª¤è™•ç†**: 404 å’Œ 500 éŒ¯èª¤è™•ç†
- **å¿«å–æ§åˆ¶**: HTTP å¿«å–æ¨™é ­
- **CORS æ”¯æ´**: è·¨åŸŸè«‹æ±‚æ”¯æ´

### ç’°å¢ƒåˆ‡æ›é‚è¼¯

#### API é…ç½®è‡ªå‹•åˆ‡æ›
```typescript
// src/config/api.ts
export const shouldUseBackendProxy = (): boolean => {
  const isLocalhost = window.location.hostname === 'localhost' || 
                     window.location.hostname === '127.0.0.1';
  
  if (isLocalhost) {
    return true;  // æœ¬æ©Ÿç«¯ä½¿ç”¨å¾Œç«¯ä»£ç†
  }
  
  return false;   // é›²ç«¯ç’°å¢ƒä½¿ç”¨ Netlify Functions
};
```

#### è‚¡åƒ¹æœå‹™è‡ªå‹•é©é…
```typescript
// src/services/stockPriceService.ts
async getStockPrice(symbol: string): Promise<StockPrice | null> {
  if (!shouldUseBackendProxy()) {
    // é›²ç«¯ç’°å¢ƒï¼šä½¿ç”¨ UnifiedStockPriceService
    const unifiedService = new UnifiedStockPriceService();
    return await unifiedService.getStockPrice(symbol);
  }
  
  // æœ¬æ©Ÿç«¯ç’°å¢ƒï¼šä½¿ç”¨å¾Œç«¯ä»£ç†
  const response = await fetch(`${API_CONFIG.BACKEND_PROXY.baseUrl}/api/stock/${symbol}`);
  // ...
}
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½è¦æ ¼

### 1. å¤šå¸³æˆ¶ç®¡ç†ç³»çµ±

#### 1.1 å¸³æˆ¶è³‡æ–™çµæ§‹
```typescript
interface Account {
  id: string;                    // å”¯ä¸€è­˜åˆ¥ç¢¼
  name: string;                  // å¸³æˆ¶åç¨±
  brokerageFee: number;          // è­‰åˆ¸æ‰‹çºŒè²»ç‡ (é è¨­ 0.1425%)
  transactionTax: number;        // äº¤æ˜“ç¨…ç‡ (å›ºå®š 0.3%)
  stockCount: number;            // è‚¡ç¥¨æ•¸é‡
  createdAt: Date;               // å»ºç«‹æ™‚é–“
  updatedAt: Date;               // æ›´æ–°æ™‚é–“
}
```

#### 1.2 å¸³æˆ¶ç®¡ç†åŠŸèƒ½
- **æ–°å¢å¸³æˆ¶**: å‹•æ…‹å»ºç«‹æ–°æŠ•è³‡å¸³æˆ¶
- **ç·¨è¼¯å¸³æˆ¶**: ä¿®æ”¹å¸³æˆ¶åç¨±å’Œè²»ç‡è¨­å®š
- **åˆªé™¤å¸³æˆ¶**: åˆªé™¤å¸³æˆ¶åŠå…¶æ‰€æœ‰è‚¡ç¥¨è¨˜éŒ„
- **å¸³æˆ¶æ’åº**: æ”¯æ´æ‹–æ‹½é‡æ–°æ’åº
- **å¸³æˆ¶åˆ‡æ›**: å¿«é€Ÿåˆ‡æ›ç•¶å‰æ“ä½œå¸³æˆ¶
- **è‚¡ç¥¨çµ±è¨ˆ**: è‡ªå‹•çµ±è¨ˆæ¯å€‹å¸³æˆ¶çš„è‚¡ç¥¨æ•¸é‡

#### 1.3 é è¨­å¸³æˆ¶é…ç½®
```typescript
const DEFAULT_ACCOUNTS: Account[] = [
  {
    id: 'account-1',
    name: 'å¸³æˆ¶1',
    brokerageFee: 0.1425,
    transactionTax: 0.3,
    stockCount: 0,
    createdAt: new Date(),
    updatedAt: new Date()
  },
  {
    id: 'account-2', 
    name: 'å¸³æˆ¶2',
    brokerageFee: 0.1425,
    transactionTax: 0.3,
    stockCount: 0,
    createdAt: new Date(),
    updatedAt: new Date()
  }
];
```

### 2. Stock List ç³»çµ± (è‚¡ç¥¨æ¸…å–®ç®¡ç†)

#### 2.1 Stock List è³‡æ–™çµæ§‹
```typescript
interface StockListData {
  date: string;                  // è³‡æ–™æ—¥æœŸ (YYYY-MM-DD)
  timestamp: string;             // æ›´æ–°æ™‚é–“æˆ³
  count: number;                 // è‚¡ç¥¨ç¸½æ•¸
  stocks: Record<string, {
    name: string;                // è‚¡ç¥¨ä¸­æ–‡åç¨±
    industry: string;            // è¡Œæ¥­åˆ†é¡
    market: string;              // å¸‚å ´ (å°è‚¡)
    marketType?: 'ä¸Šå¸‚' | 'ä¸Šæ«ƒ' | 'èˆˆæ«ƒ'; // å¸‚å ´é¡å‹
    yahooSuffix?: '.TW' | '.TWO'; // Yahoo Finance å¾Œç¶´
  }>;
}
```

#### 2.2 Stock List å·¥ä½œæ©Ÿåˆ¶

##### è³‡æ–™ä¾†æºèˆ‡æ›´æ–°
```
è³‡æ–™ä¾†æº: FinMind API (TaiwanStockInfo è³‡æ–™é›†)
æ›´æ–°é »ç‡: æ¯æ—¥è‡ªå‹•æ›´æ–°
æª”æ¡ˆä½ç½®: public/stock_list_YYYY-MM-DD.json
ç•¶å‰æª”æ¡ˆ: stock_list_2026-01-26.json (4054æ”¯è‚¡ç¥¨)
```

##### è‡ªå‹•æ›´æ–°æ©Ÿåˆ¶
```typescript
// æ¯æ—¥æª¢æŸ¥èˆ‡æ›´æ–°æµç¨‹
class StockListUpdateService {
  // 1. æª¢æŸ¥ç•¶å‰ Stock List æ˜¯å¦ç‚ºä»Šæ—¥è³‡æ–™
  async checkStockListFreshness(): Promise<boolean> {
    const today = new Date().toISOString().split('T')[0];
    const stockListData = await stockListService.loadStockList();
    return stockListData?.date === today;
  }
  
  // 2. è§¸ç™¼æ›´æ–° (æœ¬æ©Ÿç«¯/é›²ç«¯ä¸åŒç­–ç•¥)
  async triggerStockListUpdate(): Promise<boolean> {
    const envInfo = stockListService.getEnvironmentInfo();
    
    if (envInfo.isDevelopment) {
      // æœ¬æ©Ÿç«¯: èª¿ç”¨å¾Œç«¯ API æˆ– npm è…³æœ¬
      return await this.triggerBackendUpdate();
    } else {
      // é›²ç«¯: GitHub Actions è‡ªå‹•æ›´æ–°
      return true;
    }
  }
}
```

##### æ›´æ–°ç­–ç•¥è©³è§£

**æœ¬æ©Ÿç«¯æ›´æ–°ç­–ç•¥**:
```typescript
// æœ¬æ©Ÿç«¯è‡ªå‹•æ›´æ–°æµç¨‹
private async triggerBackendUpdate(): Promise<boolean> {
  try {
    // 1. å˜—è©¦èª¿ç”¨å¾Œç«¯æ›´æ–° API
    const response = await fetch('http://localhost:3001/api/update-stock-list', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        trigger: 'frontend-auto-check',
        timestamp: new Date().toISOString()
      })
    });
    
    if (response.ok) {
      logger.success('stock', 'å¾Œç«¯è‡ªå‹•æ›´æ–°æˆåŠŸ');
      return true;
    }
  } catch (error) {
    // 2. å¾Œç«¯ API ä¸å¯ç”¨ï¼Œæä¾›æ‰‹å‹•æ›´æ–°æŒ‡å¼•
    logger.info('stock', 'è«‹æ‰‹å‹•åŸ·è¡Œ: npm run update:stock-list');
    return false;
  }
}
```

**é›²ç«¯æ›´æ–°ç­–ç•¥**:
```yaml
# GitHub Actions è‡ªå‹•æ›´æ–° (.github/workflows/update-stock-list.yml)
name: Update Stock List
on:
  schedule:
    - cron: '0 1 * * 1-5'  # æ¯å€‹å·¥ä½œæ—¥å‡Œæ™¨1é»åŸ·è¡Œ
  workflow_dispatch:        # æ”¯æ´æ‰‹å‹•è§¸ç™¼

jobs:
  update-stock-list:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
          
      - name: Install dependencies
        run: |
          pip install requests pandas
          
      - name: Update Stock List
        run: |
          python scripts/update_stock_list.py
          
      - name: Commit and Push
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add stock_list_*.json
          git commit -m "Auto update stock list $(date +%Y-%m-%d)" || exit 0
          git push
```

##### æ›´æ–°è…³æœ¬å¯¦ä½œ
```python
# scripts/update_stock_list.py
import requests
import json
from datetime import datetime

def update_stock_list():
    """å¾ FinMind API æ›´æ–°è‚¡ç¥¨æ¸…å–®"""
    
    # 1. èª¿ç”¨ FinMind API ç²å–æœ€æ–°è‚¡ç¥¨æ¸…å–®
    url = "https://api.finmindtrade.com/api/v4/data"
    params = {
        "dataset": "TaiwanStockInfo",
        "token": ""  # å…è²»ä½¿ç”¨
    }
    
    response = requests.get(url, params=params)
    if response.status_code != 200:
        raise Exception(f"API èª¿ç”¨å¤±æ•—: {response.status_code}")
    
    data = response.json()
    if not data.get('data'):
        raise Exception("API è¿”å›ç©ºè³‡æ–™")
    
    # 2. è™•ç†è‚¡ç¥¨è³‡æ–™
    stocks = {}
    for item in data['data']:
        stock_id = item['stock_id']
        stocks[stock_id] = {
            'name': item['stock_name'],
            'industry': item['industry_category'],
            'market': 'å°è‚¡'
        }
    
    # 3. ç”Ÿæˆæ–°çš„è‚¡ç¥¨æ¸…å–®æª”æ¡ˆ
    today = datetime.now().strftime('%Y-%m-%d')
    stock_list_data = {
        'date': today,
        'timestamp': datetime.now().isoformat(),
        'count': len(stocks),
        'stocks': stocks
    }
    
    # 4. ä¿å­˜æª”æ¡ˆ
    filename = f'stock_list_{today}.json'
    with open(filename, 'w', encoding='utf-8') as f:
        json.dump(stock_list_data, f, ensure_ascii=False, indent=2)
    
    # 5. æ›´æ–°ä¸»è¦æª”æ¡ˆé€£çµ
    with open('stock_list.json', 'w', encoding='utf-8') as f:
        json.dump(stock_list_data, f, ensure_ascii=False, indent=2)
    
    print(f"âœ… è‚¡ç¥¨æ¸…å–®æ›´æ–°å®Œæˆ: {len(stocks)} æ”¯è‚¡ç¥¨")
    return True

if __name__ == "__main__":
    update_stock_list()
```

##### æ‡‰ç”¨å•Ÿå‹•æ™‚çš„æª¢æŸ¥æ©Ÿåˆ¶
```typescript
// App.tsx ä¸­çš„åˆå§‹åŒ–é‚è¼¯
useEffect(() => {
  const initializeStockListService = async () => {
    try {
      // 1. åˆå§‹åŒ–è‚¡ç¥¨æ¸…å–®æ›´æ–°æœå‹™
      stockListUpdateService.init();
      
      // 2. æª¢æŸ¥ä¸¦æ›´æ–°è‚¡ç¥¨æ¸…å–® (å¦‚æœéœ€è¦)
      await stockListUpdateService.checkAndUpdate();
      
      logger.info('stock', 'è‚¡ç¥¨æ¸…å–®æœå‹™åˆå§‹åŒ–å®Œæˆ');
    } catch (error) {
      logger.error('stock', 'è‚¡ç¥¨æ¸…å–®æœå‹™åˆå§‹åŒ–å¤±æ•—', error);
    }
  };
  
  initializeStockListService();
}, []);
```

##### å®šæœŸæª¢æŸ¥æ©Ÿåˆ¶
```typescript
// æ¯å°æ™‚æª¢æŸ¥ä¸€æ¬¡è‚¡ç¥¨æ¸…å–®æ–°é®®åº¦
class StockListUpdateService {
  private readonly CHECK_INTERVAL = 60 * 60 * 1000; // 1å°æ™‚
  
  init(): void {
    // è¨­å®šå®šæœŸæª¢æŸ¥
    setInterval(() => {
      this.checkStockListFreshness().then(needsUpdate => {
        if (needsUpdate) {
          logger.info('stock', 'æª¢æ¸¬åˆ°è‚¡ç¥¨æ¸…å–®éœ€è¦æ›´æ–°');
          this.triggerStockListUpdate();
        }
      });
    }, this.CHECK_INTERVAL);
    
    logger.info('stock', 'è‚¡ç¥¨æ¸…å–®æ›´æ–°æœå‹™å·²åˆå§‹åŒ–');
  }
}
```

#### 2.4 Stock List çš„æ ¸å¿ƒä½œç”¨

##### ä½œç‚ºè‚¡ç¥¨åç¨±çš„å–®ä¸€çœŸç›¸ä¾†æº
```typescript
// Stock List æä¾›çµ±ä¸€çš„è‚¡ç¥¨åç¨±ä¾†æº
interface StockNameProvider {
  // 1. æœå°‹æ™‚æä¾›ä¸­æ–‡åç¨±
  searchByName(query: string): StockInfo[];
  
  // 2. è‚¡åƒ¹æ›´æ–°æ™‚è£œå……åç¨±
  getStockName(symbol: string): string | null;
  
  // 3. æ–°å¢è‚¡ç¥¨æ™‚é©—è­‰ä»£ç¢¼
  validateStockSymbol(symbol: string): boolean;
}

// å¯¦éš›ä½¿ç”¨ç¯„ä¾‹
const getStockInfo = async (symbol: string) => {
  const stockListData = await stockListService.loadStockList();
  const stockInfo = stockListData?.stocks[symbol];
  
  return {
    symbol,
    name: stockInfo?.name || symbol,           // å„ªå…ˆä½¿ç”¨ Stock List åç¨±
    market: stockInfo?.market || 'å°ç£',
    marketType: stockInfo?.marketType || 'ä¸Šå¸‚',
    yahooSuffix: stockInfo?.yahooSuffix || '.TW'
  };
};
```

##### æ”¯æ´æ™ºèƒ½è‚¡ç¥¨ä»£ç¢¼å¾Œç¶´åˆ¤æ–·
```typescript
// Stock List å¢å¼·å¾Œæä¾› Yahoo Finance å¾Œç¶´è³‡è¨Š
const getYahooSymbolFromStockList = (symbol: string): string => {
  const stockListData = stockListService.getCachedData();
  const stockInfo = stockListData?.stocks[symbol];
  
  if (stockInfo?.yahooSuffix) {
    // ä½¿ç”¨ Stock List æä¾›çš„å¾Œç¶´
    return `${symbol}${stockInfo.yahooSuffix}`;
  }
  
  // å‚™æ´ï¼šä½¿ç”¨æ™ºèƒ½åˆ¤æ–·é‚è¼¯
  return stockListService.getYahooSuffix(symbol);
};
```

##### æä¾›å®Œæ•´çš„å¸‚å ´åˆ†é¡è³‡è¨Š
```typescript
// Stock List æä¾›è©³ç´°çš„å¸‚å ´åˆ†é¡
interface EnhancedStockInfo {
  name: string;                    // ä¸­æ–‡åç¨±
  industry: string;                // è¡Œæ¥­åˆ†é¡
  market: string;                  // å¸‚å ´ (å°è‚¡)
  marketType: 'ä¸Šå¸‚' | 'ä¸Šæ«ƒ' | 'èˆˆæ«ƒ'; // å…·é«”å¸‚å ´é¡å‹
  yahooSuffix: '.TW' | '.TWO';     // Yahoo Finance å¾Œç¶´
}

// ä½¿ç”¨ç¯„ä¾‹ï¼šæ ¹æ“šå¸‚å ´é¡å‹é¸æ“‡ä¸åŒçš„è‚¡åƒ¹ API ç­–ç•¥
const selectPriceAPI = (stockInfo: EnhancedStockInfo) => {
  if (stockInfo.marketType === 'ä¸Šæ«ƒ') {
    // ä¸Šæ«ƒè‚¡ç¥¨å¯èƒ½éœ€è¦ç‰¹æ®Šè™•ç†
    return 'yahoo_with_two_suffix';
  } else {
    // ä¸Šå¸‚è‚¡ç¥¨ä½¿ç”¨æ¨™æº–è™•ç†
    return 'yahoo_with_tw_suffix';
  }
};
```
#### 2.5 ç’°å¢ƒé©æ‡‰è¼‰å…¥ç­–ç•¥
```typescript
// æœ¬æ©Ÿç«¯è¼‰å…¥ç­–ç•¥
async loadFromDevelopment(): Promise<StockListData | null> {
  // 1. å„ªå…ˆå˜—è©¦å¾Œç«¯ API
  try {
    const response = await fetch('http://localhost:3001/api/stock-list');
    if (response.ok) return await response.json();
  } catch (error) {
    // å¾Œç«¯ä¸å¯ç”¨ï¼Œä½¿ç”¨å‚™ç”¨æ–¹æ¡ˆ
  }
  
  // 2. å‚™ç”¨: å‰ç«¯æª”æ¡ˆ
  return await this.loadFromFile();
}

// é›²ç«¯è¼‰å…¥ç­–ç•¥  
async loadFromProduction(): Promise<StockListData | null> {
  // ç›´æ¥ä½¿ç”¨å‰ç«¯æª”æ¡ˆ
  return await this.loadFromFile();
}

// çµ±ä¸€æª”æ¡ˆè¼‰å…¥
async loadFromFile(): Promise<StockListData | null> {
  const filePaths = [
    './stock_list.json',           // ä¸»è¦è·¯å¾‘
    '/stock_list.json',            // å‚™ç”¨è·¯å¾‘ 1
    './public/stock_list.json',    // å‚™ç”¨è·¯å¾‘ 2
  ];
  
  for (const filePath of filePaths) {
    try {
      const response = await fetch(filePath);
      if (response.ok) {
        const data = await response.json();
        if (this.validateStockListData(data)) {
          return this.enhanceStockList(data); // å¢å¼·å¸‚å ´é¡å‹å’Œå¾Œç¶´
        }
      }
    } catch (error) {
      continue; // å˜—è©¦ä¸‹ä¸€å€‹è·¯å¾‘
    }
  }
  
  return null;
}
```

#### 2.3 Stock List å¢å¼·æ©Ÿåˆ¶
```typescript
// è‡ªå‹•å¢å¼·è‚¡ç¥¨è³‡è¨Š
private enhanceStockInfo(stockId: string, basicInfo: any): any {
  const code = parseInt(stockId.substring(0, 4));
  const isBondETF = /^00\d{2,3}B$/i.test(stockId);
  
  let marketType: 'ä¸Šå¸‚' | 'ä¸Šæ«ƒ' | 'èˆˆæ«ƒ';
  let yahooSuffix: '.TW' | '.TWO';
  
  // ç‰¹æ®Šæ¡ˆä¾‹è™•ç†
  const specialCases: Record<string, string> = {
    '8112': '.TW', // è‡³ä¸Šï¼šé›–åœ¨ 8000 ç¯„åœä½†éœ€ä½¿ç”¨ .TW
    '4585': '.TW', // é”æ˜ï¼šèˆˆæ«ƒè‚¡ç¥¨ï¼Œæœ€å¸¸ç”¨ .TW
  };
  
  if (specialCases[stockId]) {
    yahooSuffix = specialCases[stockId] as '.TW' | '.TWO';
    marketType = yahooSuffix === '.TW' ? 'ä¸Šå¸‚' : 'ä¸Šæ«ƒ';
  } else if (isBondETF) {
    marketType = 'ä¸Šæ«ƒ';
    yahooSuffix = '.TWO';
  } else if (code >= 3000 && code <= 8999) {
    marketType = 'ä¸Šæ«ƒ';
    yahooSuffix = '.TWO';
  } else {
    marketType = 'ä¸Šå¸‚';
    yahooSuffix = '.TW';
  }
  
  return {
    ...basicInfo,
    marketType,
    yahooSuffix
  };
}
```

### 3. è‚¡ç¥¨æœå°‹ç³»çµ±

#### 3.1 æœå°‹æµç¨‹æ¶æ§‹
```
ç”¨æˆ¶è¼¸å…¥æœå°‹é—œéµå­—
    â†“
ç’°å¢ƒæª¢æ¸¬ (æœ¬æ©Ÿç«¯ vs é›²ç«¯)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æœ¬æ©Ÿç«¯æœå°‹     â”‚    é›²ç«¯æœå°‹      â”‚
â”‚                â”‚                â”‚
â”‚ 1. å¾Œç«¯ API     â”‚ 1. å‰ç«¯ç›´æ¥æœå°‹  â”‚
â”‚ 2. å‰ç«¯å‚™æ´     â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
å¾ Stock List å–å¾—è‚¡ç¥¨åç¨±
    â†“
èª¿ç”¨å°æ‡‰ç’°å¢ƒçš„è‚¡åƒ¹ API ç²å–å³æ™‚è‚¡åƒ¹
    â†“
è¿”å›å®Œæ•´æœå°‹çµæœ (åç¨± + å³æ™‚è‚¡åƒ¹)
```

#### 3.2 æœ¬æ©Ÿç«¯æœå°‹å¯¦ä½œ
```typescript
// æœ¬æ©Ÿç«¯æœå°‹ç­–ç•¥
const searchStocks = async (searchQuery: string): Promise<StockSearchResult[]> => {
  const envInfo = stockListService.getEnvironmentInfo();
  
  if (envInfo.isDevelopment) {
    // 1. å„ªå…ˆä½¿ç”¨å¾Œç«¯æœå°‹ API
    try {
      const response = await fetch(API_ENDPOINTS.searchStock(searchQuery));
      if (response.ok) {
        const stockDataArray = await response.json();
        // å¾Œç«¯å·²æ•´åˆ Stock List + å³æ™‚è‚¡åƒ¹
        return Array.isArray(stockDataArray) ? stockDataArray : [stockDataArray];
      }
    } catch (backendError) {
      // å¾Œç«¯å¤±æ•—ï¼Œä½¿ç”¨å‰ç«¯å‚™æ´
    }
  }
  
  // 2. å‰ç«¯ç›´æ¥æœå°‹ (é›²ç«¯ç’°å¢ƒæˆ–æœ¬æ©Ÿç«¯å‚™æ´)
  return await searchStocksDirectly(searchQuery);
};
```

#### 3.3 å‰ç«¯ç›´æ¥æœå°‹å¯¦ä½œ
```typescript
// å‰ç«¯ç›´æ¥æœå°‹ (ä½¿ç”¨ Stock List + é›²ç«¯è‚¡åƒ¹ API)
const searchStocksDirectly = async (query: string): Promise<StockSearchResult[]> => {
  // 1. å¾ Stock List æœå°‹è‚¡ç¥¨åç¨±
  const stockListData = await stockListService.loadStockList();
  if (!stockListData?.stocks) return [];
  
  // 2. æ™ºèƒ½æœå°‹é‚è¼¯ (ç²¾ç¢ºåŒ¹é…å„ªå…ˆ)
  const stocks = Object.entries(stockListData.stocks);
  const filtered = stocks.filter(([symbol, info]) => {
    const queryUpper = query.toUpperCase().trim();
    const symbolUpper = symbol.toUpperCase();
    const queryLower = query.toLowerCase().trim();
    const nameLower = info.name.toLowerCase();
    
    // ç²¾ç¢ºåŒ¹é…è‚¡ç¥¨ä»£ç¢¼ (æœ€é«˜å„ªå…ˆç´š)
    if (symbolUpper === queryUpper) return true;
    
    // è‚¡ç¥¨ä»£ç¢¼é–‹é ­åŒ¹é… (é«˜å„ªå…ˆç´š)
    if (symbolUpper.startsWith(queryUpper)) return true;
    
    // ä¸­æ–‡åç¨±åŒ…å«æŸ¥è©¢å­—ä¸² (ä¸­å„ªå…ˆç´š)
    if (nameLower.includes(queryLower)) return true;
    
    // è‚¡ç¥¨ä»£ç¢¼åŒ…å«æŸ¥è©¢å­—ä¸² (ä½å„ªå…ˆç´šï¼ŒæŸ¥è©¢é•·åº¦>=3)
    if (query.length >= 3 && symbolUpper.includes(queryUpper)) return true;
    
    return false;
  });
  
  // 3. æŒ‰åŒ¹é…å„ªå…ˆç´šæ’åºï¼Œé™åˆ¶çµæœæ•¸é‡
  const sortedFiltered = filtered.sort(([aSymbol], [bSymbol]) => {
    const aSymbolUpper = aSymbol.toUpperCase();
    const bSymbolUpper = bSymbol.toUpperCase();
    const queryUpper = query.toUpperCase().trim();
    
    // ç²¾ç¢ºåŒ¹é…æ’åœ¨æœ€å‰é¢
    if (aSymbolUpper === queryUpper && bSymbolUpper !== queryUpper) return -1;
    if (bSymbolUpper === queryUpper && aSymbolUpper !== queryUpper) return 1;
    
    // é–‹é ­åŒ¹é…æ’åœ¨å‰é¢
    const aStarts = aSymbolUpper.startsWith(queryUpper);
    const bStarts = bSymbolUpper.startsWith(queryUpper);
    if (aStarts && !bStarts) return -1;
    if (bStarts && !aStarts) return 1;
    
    // å…¶ä»–æŒ‰å­—æ¯é †åº
    return aSymbolUpper.localeCompare(bSymbolUpper);
  }).slice(0, 10);
  
  // 4. ç‚ºæ¯å€‹è‚¡ç¥¨ç²å–å³æ™‚è‚¡åƒ¹
  const stocksWithPrice = await Promise.all(
    sortedFiltered.map(async ([symbol, info]) => {
      // ä½¿ç”¨ç’°å¢ƒé©æ‡‰çš„è‚¡åƒ¹æœå‹™
      const priceData = await cloudStockPriceService.getStockPrice(symbol);
      
      return {
        symbol: symbol,
        name: info.name,                    // ä¾†è‡ª Stock List
        price: priceData?.price || 0,       // ä¾†è‡ªå³æ™‚è‚¡åƒ¹ API
        market: info.market || 'å°ç£',
        change: priceData?.change || 0,
        changePercent: priceData?.changePercent || 0
      };
    })
  );
  
  return stocksWithPrice;
};
```

#### 3.4 æœå°‹çµæœè³‡æ–™çµæ§‹
```typescript
interface StockSearchResult {
  symbol: string;        // è‚¡ç¥¨ä»£ç¢¼ (ä¾†è‡ª Stock List)
  name: string;          // è‚¡ç¥¨åç¨± (ä¾†è‡ª Stock List)
  market: string;        // å¸‚å ´é¡å‹ (ä¾†è‡ª Stock List)
  price?: number;        // å³æ™‚è‚¡åƒ¹ (ä¾†è‡ªè‚¡åƒ¹ API)
  change?: number;       // æ¼²è·Œé‡‘é¡ (ä¾†è‡ªè‚¡åƒ¹ API)
  changePercent?: number; // æ¼²è·Œç™¾åˆ†æ¯” (ä¾†è‡ªè‚¡åƒ¹ API)
}
```

### 4. è‚¡ç¥¨è¨˜éŒ„ç®¡ç†ç³»çµ±

#### 4.1 è‚¡ç¥¨è¨˜éŒ„è³‡æ–™çµæ§‹
```typescript
interface StockRecord {
  id: string;                    // å”¯ä¸€è­˜åˆ¥ç¢¼
  accountId: string;             // æ‰€å±¬å¸³æˆ¶ID
  symbol: string;                // è‚¡ç¥¨ä»£ç¢¼ (å¦‚: 2330)
  name: string;                  // è‚¡ç¥¨åç¨± (å¦‚: å°ç©é›»)
  shares: number;                // æŒè‚¡æ•¸ (å«é…è‚¡èª¿æ•´)
  costPrice: number;             // åŸå§‹æˆæœ¬åƒ¹
  adjustedCostPrice?: number;    // èª¿æ•´å¾Œæˆæœ¬åƒ¹ (æ‰£é™¤è‚¡æ¯)
  purchaseDate: Date;            // è³¼è²·æ—¥æœŸ
  currentPrice: number;          // ç¾åƒ¹
  change: number;                // æ¼²è·Œé‡‘é¡
  changePercent: number;         // æ¼²è·Œç™¾åˆ†æ¯”
  lastUpdated: Date;             // æœ€å¾Œæ›´æ–°æ™‚é–“
  priceSource: string;           // åƒ¹æ ¼ä¾†æº (Yahoo/FinMind/TWSE)
  dividendRecords?: DividendRecord[]; // é™¤æ¬Šæ¯è¨˜éŒ„
  lastDividendUpdate?: string;   // æœ€å¾Œé™¤æ¬Šæ¯æ›´æ–°æ™‚é–“
  isBondETF?: boolean;           // æ˜¯å¦ç‚ºå‚µåˆ¸ETF
  market?: string;               // å¸‚å ´é¡å‹ (ä¸Šå¸‚/ä¸Šæ«ƒ/ETF)
}
```

#### 4.2 è‚¡ç¥¨æ“ä½œåŠŸèƒ½
- **æ–°å¢è‚¡ç¥¨**: æ‰‹å‹•è¼¸å…¥æˆ–æœå°‹æ–°å¢è‚¡ç¥¨
- **ç·¨è¼¯è‚¡ç¥¨**: ä¿®æ”¹æŒè‚¡æ•¸ã€æˆæœ¬åƒ¹ç­‰è³‡è¨Š
- **åˆªé™¤è‚¡ç¥¨**: ç§»é™¤è‚¡ç¥¨è¨˜éŒ„
- **å¿«é€Ÿæ–°å¢**: QuickAddStock çµ„ä»¶æä¾›å¿«é€Ÿæ–°å¢
- **è‚¡ç¥¨æœå°‹**: æ”¯æ´ä»£ç¢¼å’Œåç¨±æœå°‹
- **æ‰¹æ¬¡æ“ä½œ**: æ‰¹æ¬¡æ›´æ–°è‚¡åƒ¹å’Œé™¤æ¬Šæ¯

#### 4.3 è‚¡åƒ¹æ›´æ–°æ©Ÿåˆ¶

##### æœ¬æ©Ÿç«¯è‚¡åƒ¹æ›´æ–°
```typescript
// æœ¬æ©Ÿç«¯ä½¿ç”¨å¾Œç«¯ä»£ç†
const response = await fetch('http://localhost:3001/api/stock/2330');
const stockData = await response.json();
// stockData.source = 'Yahoo' (å¾Œç«¯ä»£ç†å¯¦éš›èª¿ç”¨Yahoo Finance)
```

##### é›²ç«¯è‚¡åƒ¹æ›´æ–°
```typescript
// é›²ç«¯ä½¿ç”¨ Netlify Functions
const response = await fetch('/.netlify/functions/stock?symbol=2330');
const stockData = await response.json();
// stockData.source = 'Yahoo Finance (Netlify)'
```

##### è‚¡åƒ¹æ›´æ–°èˆ‡ Stock List æ•´åˆ
```typescript
// è‚¡åƒ¹æ›´æ–°æµç¨‹
async function updateStockPrice(stockRecord: StockRecord) {
  // 1. å¾ Stock List ç²å–è‚¡ç¥¨åç¨± (å¦‚æœæ²’æœ‰)
  if (!stockRecord.name) {
    const stockListData = await stockListService.loadStockList();
    const stockInfo = stockListData?.stocks[stockRecord.symbol];
    if (stockInfo) {
      stockRecord.name = stockInfo.name;
    }
  }
  
  // 2. æ ¹æ“šç’°å¢ƒé¸æ“‡è‚¡åƒ¹ API
  const envInfo = stockListService.getEnvironmentInfo();
  let priceData;
  
  if (envInfo.isDevelopment) {
    // æœ¬æ©Ÿç«¯: ä½¿ç”¨å¾Œç«¯ä»£ç†
    priceData = await stockPriceService.getStockPrice(stockRecord.symbol);
  } else {
    // é›²ç«¯: ä½¿ç”¨é›²ç«¯è‚¡åƒ¹æœå‹™
    priceData = await cloudStockPriceService.getStockPrice(stockRecord.symbol);
  }
  
  // 3. æ›´æ–°è‚¡ç¥¨è¨˜éŒ„
  if (priceData) {
    stockRecord.currentPrice = priceData.price;
    stockRecord.change = priceData.change;
    stockRecord.changePercent = priceData.changePercent;
    stockRecord.priceSource = priceData.source;
    stockRecord.lastUpdated = new Date();
  }
}
```

##### æ™ºèƒ½å¾Œç¶´åˆ¤æ–·
```typescript
function getYahooSymbol(symbol: string): string {
  const code = parseInt(symbol.substring(0, 4));
  const isBondETF = /^00\d{2,3}B$/i.test(symbol);
  
  // ç‰¹æ®Šæ¡ˆä¾‹
  if (symbol === '8112') return '8112.TW';  // è‡³ä¸Š
  if (symbol === '4585') return '4585.TW';  // é”æ˜
  
  // å‚µåˆ¸ ETF å„ªå…ˆæ«ƒè²·ä¸­å¿ƒ
  if (isBondETF) return `${symbol}.TWO`;
  
  // ä¸Šæ«ƒè‚¡ç¥¨ (3000-8999) å„ªå…ˆæ«ƒè²·ä¸­å¿ƒ
  if (code >= 3000 && code <= 8999) return `${symbol}.TWO`;
  
  // ä¸Šå¸‚è‚¡ç¥¨ (1000-2999) å„ªå…ˆè­‰äº¤æ‰€
  return `${symbol}.TW`;
}
```

### 5. é™¤æ¬Šæ¯è¨ˆç®—ç³»çµ±

#### 5.1 é™¤æ¬Šæ¯è¨˜éŒ„çµæ§‹
```typescript
interface DividendRecord {
  id: string;                    // å”¯ä¸€è­˜åˆ¥ç¢¼
  stockId: string;               // é—œè¯è‚¡ç¥¨è¨˜éŒ„ID
  symbol: string;                // è‚¡ç¥¨ä»£ç¢¼
  exRightDate: Date;             // é™¤æ¬Šæ¯æ—¥æœŸ
  cashDividendPerShare: number;  // æ¯è‚¡ç¾é‡‘è‚¡åˆ©
  totalCashDividend: number;     // ç¸½ç¾é‡‘è‚¡åˆ©é‡‘é¡
  stockDividendRatio: number;    // é…è‚¡æ¯”ä¾‹ (æ¯1000è‚¡é…Xè‚¡)
  stockDividendShares: number;   // é…å¾—è‚¡æ•¸
  sharesBeforeRight: number;     // é™¤æ¬Šæ¯å‰æŒè‚¡æ•¸
  sharesAfterRight: number;      // é™¤æ¬Šæ¯å¾ŒæŒè‚¡æ•¸
  costPriceBeforeRight: number;  // é™¤æ¬Šæ¯å‰æˆæœ¬åƒ¹
  costPriceAfterRight: number;   // é™¤æ¬Šæ¯å¾Œèª¿æ•´æˆæœ¬åƒ¹
  recordDate?: Date;             // åœæ­¢éæˆ¶æ—¥
  paymentDate?: Date;            // ç™¼æ”¾æ—¥
  type: 'cash' | 'stock' | 'both'; // é™¤æ¬Šæ¯é¡å‹
}
```

#### 5.2 è¨ˆç®—å…¬å¼èˆ‡è¦å‰‡

##### é…è‚¡è¨ˆç®—å…¬å¼
```typescript
// é…è‚¡æ•¸é‡è¨ˆç®—
const stockDividendShares = Math.floor(sharesBeforeRight * stockDividendRatio / 1000);

// é™¤æ¬Šå¾ŒæŒè‚¡æ•¸
const sharesAfterRight = sharesBeforeRight + stockDividendShares;
```

##### èª¿æ•´å¾Œæˆæœ¬åƒ¹å…¬å¼
```typescript
// èª¿æ•´å¾Œæˆæœ¬åƒ¹è¨ˆç®—
const totalCostBeforeRight = costPriceBeforeRight * sharesBeforeRight;
const totalCashDividend = sharesBeforeRight * cashDividendPerShare;
const adjustedCostPrice = (totalCostBeforeRight - totalCashDividend) / sharesAfterRight;
```

##### æ™‚é–“é †åºè¨ˆç®—è¦å‰‡
```typescript
// âš ï¸ é—œéµï¼šå¿…é ˆæŒ‰æ™‚é–“å¾èˆŠåˆ°æ–°æ’åº
const sortedDividends = apiDividends.sort((a, b) => 
  new Date(a.exDividendDate).getTime() - new Date(b.exDividendDate).getTime()
);

// ç´¯ç©è¨ˆç®—æŒè‚¡æ•¸
let currentShares = stock.shares;
sortedDividends.forEach(dividend => {
  const stockDividendShares = Math.floor(currentShares * dividend.stockDividendRatio / 1000);
  currentShares = currentShares + stockDividendShares; // ç´¯ç©æ›´æ–°
});
```

#### 5.3 é™¤æ¬Šæ¯è™•ç†æœå‹™
```typescript
// çµ±ä¸€é™¤æ¬Šæ¯è™•ç†æœå‹™
class RightsEventService {
  static async processStockRightsEvents(
    stockRecord: StockRecord,
    onProgress?: (message: string) => void,
    forceRecalculate: boolean = false
  ): Promise<StockRecord> {
    // 1. ç²å– API é™¤æ¬Šæ¯è³‡æ–™
    // 2. æŒ‰æ™‚é–“æ’åº (å¾èˆŠåˆ°æ–°)
    // 3. ç´¯ç©è¨ˆç®—é…è‚¡
    // 4. æ›´æ–°è‚¡ç¥¨è¨˜éŒ„
  }
}
```

#### 5.4 é™¤æ¬Šæ¯æ¨¡å¼åˆ‡æ›
- **ä¸å«æ¬Šæ¯æ¨¡å¼** (`excluding_rights`): é¡¯ç¤ºåŸå§‹æˆæœ¬åƒ¹å’Œæç›Š
- **å«æ¬Šæ¯æ¨¡å¼** (`including_rights`): é¡¯ç¤ºèª¿æ•´å¾Œæˆæœ¬åƒ¹å’Œæç›Š

### 6. æŠ•è³‡çµ„åˆçµ±è¨ˆç³»çµ±

#### 6.1 çµ±è¨ˆè³‡æ–™çµæ§‹
```typescript
interface PortfolioStats {
  totalMarketValue: number;      // ç¸½å¸‚å€¼
  totalCost: number;             // ç¸½æˆæœ¬
  totalGainLoss: number;         // ç¸½æç›Š
  totalGainLossPercent: number;  // ç¸½æç›Šç‡
  totalDividend: number;         // ç¸½è‚¡æ¯æ”¶å…¥
  totalReturn: number;           // ç¸½å ±é…¬ (æç›Š+è‚¡æ¯)
  todayChange: number;           // ä»Šæ—¥è®ŠåŒ–
  todayChangePercent: number;    // ä»Šæ—¥è®ŠåŒ–ç‡
  stockCount: number;            // è‚¡ç¥¨æ•¸é‡
  accountCount: number;          // å¸³æˆ¶æ•¸é‡
}
```

#### 6.2 çµ±è¨ˆè¨ˆç®—é‚è¼¯
```typescript
// æŠ•è³‡çµ„åˆçµ±è¨ˆè¨ˆç®—
const calculatePortfolioStats = (stocks: StockRecord[], rightsMode: string) => {
  return stocks.reduce((stats, stock) => {
    const costPrice = rightsMode === 'including_rights' 
      ? (stock.adjustedCostPrice || stock.costPrice)
      : stock.costPrice;
    
    const marketValue = stock.currentPrice * stock.shares;
    const totalCost = costPrice * stock.shares;
    const gainLoss = marketValue - totalCost;
    
    stats.totalMarketValue += marketValue;
    stats.totalCost += totalCost;
    stats.totalGainLoss += gainLoss;
    
    return stats;
  }, initialStats);
};
```

#### 6.3 éš±ç§æ¨¡å¼ä¿è­·
```typescript
// éš±ç§æ¨¡å¼é¡¯ç¤ºé‚è¼¯
const formatCurrency = (amount: number, isPrivacyMode: boolean) => {
  if (isPrivacyMode) {
    return '***,***';
  }
  return amount.toLocaleString('zh-TW');
};
```

### 7. é›²ç«¯åŒæ­¥ç³»çµ±

#### 7.1 GitHub Gist æ•´åˆ

##### Gist è³‡æ–™çµæ§‹
```typescript
interface GistData {
  accounts: Account[];           // å¸³æˆ¶è³‡æ–™
  stocks: StockRecord[];         // è‚¡ç¥¨è³‡æ–™
  metadata: {
    version: string;             // è³‡æ–™ç‰ˆæœ¬
    exportDate: string;          // åŒ¯å‡ºæ—¥æœŸ
    totalAccounts: number;       // å¸³æˆ¶ç¸½æ•¸
    totalStocks: number;         // è‚¡ç¥¨ç¸½æ•¸
  };
}
```

##### GitHub Token ç®¡ç†
```typescript
interface GitHubConfig {
  token: string;                 // Personal Access Token
  gistId?: string;              // Gist ID (è‡ªå‹•æœå°‹)
  autoSync: boolean;            // è‡ªå‹•åŒæ­¥é–‹é—œ
  syncInterval: number;         // åŒæ­¥é–“éš” (åˆ†é˜)
}
```

#### 7.2 åŒæ­¥åŠŸèƒ½å¯¦ä½œ

##### è‡ªå‹•æœå°‹ Gist
```typescript
// è‡ªå‹•æœå°‹ç”¨æˆ¶çš„æŠ•è³‡çµ„åˆ Gists
const searchUserGists = async (token: string) => {
  const response = await fetch('https://api.github.com/gists', {
    headers: { 'Authorization': `token ${token}` }
  });
  
  const gists = await response.json();
  return gists.filter(gist => 
    gist.description?.includes('Stock Portfolio') ||
    Object.keys(gist.files).some(filename => 
      filename.includes('portfolio') || filename.includes('stock')
    )
  );
};
```

##### è³‡æ–™ä¸Šå‚³
```typescript
// ä¸Šå‚³æŠ•è³‡çµ„åˆè³‡æ–™åˆ° GitHub Gist
const uploadToGist = async (data: GistData, token: string) => {
  const gistContent = {
    description: `Stock Portfolio System - ${new Date().toISOString()}`,
    files: {
      'portfolio-data.json': {
        content: JSON.stringify(data, null, 2)
      }
    }
  };
  
  const response = await fetch('https://api.github.com/gists', {
    method: 'POST',
    headers: {
      'Authorization': `token ${token}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(gistContent)
  });
  
  return await response.json();
};
```

##### è³‡æ–™ä¸‹è¼‰
```typescript
// å¾ GitHub Gist ä¸‹è¼‰æŠ•è³‡çµ„åˆè³‡æ–™
const downloadFromGist = async (gistId: string, token: string) => {
  const response = await fetch(`https://api.github.com/gists/${gistId}`, {
    headers: { 'Authorization': `token ${token}` }
  });
  
  const gist = await response.json();
  const fileContent = Object.values(gist.files)[0]?.content;
  
  return JSON.parse(fileContent);
};
```

#### 7.3 é›²ç«¯åŒæ­¥é–‹ç™¼è¦ç¯„

##### çµ±ä¸€è³‡æ–™å°å…¥é‚è¼¯
```typescript
// æ‰€æœ‰é›²ç«¯åŒæ­¥éƒ½ä½¿ç”¨ç›¸åŒçš„è³‡æ–™å°å…¥é‚è¼¯
const handleCloudDataSync = (cloudData: GistData) => {
  const { importData, setCurrentAccount } = useAppStore.getState();
  
  // ä½¿ç”¨çµ±ä¸€çš„ importData æ–¹æ³•
  importData(cloudData.accounts, cloudData.stocks || [], 'replace');
  
  // è‡ªå‹•åˆ‡æ›åˆ°ç¬¬ä¸€å€‹å¸³æˆ¶
  if (cloudData.accounts.length > 0) {
    setCurrentAccount(cloudData.accounts[0].name);
  }
  
  // è‡ªå‹•å•Ÿç”¨éš±ç§æ¨¡å¼
  if (!isPrivacyMode) {
    togglePrivacyMode();
  }
};
```

##### è‡ªå‹•å®¹éŒ¯æ©Ÿåˆ¶
```typescript
// ä¸ä¾è³´æœ¬åœ°ç‹€æ…‹ï¼Œèƒ½è‡ªå‹•å°‹æ‰¾é›²ç«¯è³‡æ–™
const downloadData = async (token: string) => {
  try {
    // è‡ªå‹•æœå°‹ï¼Œä¸ä¾è³´æœ¬åœ° gistId
    const gists = await searchUserGists(token);
    if (gists.length > 0) {
      return await downloadFromGist(gists[0].id, token);
    }
  } catch (error) {
    // å„ªé›…è™•ç†éŒ¯èª¤
    throw new Error(`é›²ç«¯åŒæ­¥å¤±æ•—: ${error.message}`);
  }
};
```

### 8. è³‡æ–™åŒ¯å…¥åŒ¯å‡ºç³»çµ±

#### 8.1 åŒ¯å‡ºåŠŸèƒ½

##### JSON æ ¼å¼åŒ¯å‡º
```typescript
interface ExportData {
  metadata: {
    version: string;             // ç³»çµ±ç‰ˆæœ¬
    exportDate: string;          // åŒ¯å‡ºæ—¥æœŸ
    totalAccounts: number;       // å¸³æˆ¶ç¸½æ•¸
    totalStocks: number;         // è‚¡ç¥¨ç¸½æ•¸
  };
  accounts: Account[];           // å¸³æˆ¶è³‡æ–™
  stocks: StockRecord[];         // è‚¡ç¥¨è³‡æ–™
  settings: {
    isPrivacyMode: boolean;      // éš±ç§æ¨¡å¼
    rightsAdjustmentMode: string; // é™¤æ¬Šæ¯æ¨¡å¼
  };
}
```

##### Excel æ ¼å¼åŒ¯å‡º
```typescript
// Excel åŒ¯å‡ºæ ¼å¼
const excelData = stocks.map(stock => ({
  'å¸³æˆ¶': getAccountName(stock.accountId),
  'è‚¡ç¥¨ä»£ç¢¼': stock.symbol,
  'è‚¡ç¥¨åç¨±': stock.name,
  'æŒè‚¡æ•¸': stock.shares,
  'æˆæœ¬åƒ¹': stock.costPrice,
  'ç¾åƒ¹': stock.currentPrice,
  'å¸‚å€¼': stock.currentPrice * stock.shares,
  'æç›Š': (stock.currentPrice - stock.costPrice) * stock.shares,
  'æç›Šç‡': ((stock.currentPrice - stock.costPrice) / stock.costPrice * 100).toFixed(2) + '%'
}));
```

#### 8.2 åŒ¯å…¥åŠŸèƒ½

##### è³‡æ–™é©—è­‰
```typescript
// åŒ¯å…¥è³‡æ–™é©—è­‰
const validateImportData = (data: any): boolean => {
  if (!data.accounts || !Array.isArray(data.accounts)) return false;
  if (!data.stocks || !Array.isArray(data.stocks)) return false;
  
  // é©—è­‰å¸³æˆ¶è³‡æ–™çµæ§‹
  for (const account of data.accounts) {
    if (!account.id || !account.name) return false;
  }
  
  // é©—è­‰è‚¡ç¥¨è³‡æ–™çµæ§‹
  for (const stock of data.stocks) {
    if (!stock.id || !stock.symbol || !stock.accountId) return false;
  }
  
  return true;
};
```

##### è¡çªè™•ç†
```typescript
// åŒ¯å…¥æ¨¡å¼é¸æ“‡
type ImportMode = 'replace' | 'merge' | 'skip';

const importData = (accounts: Account[], stocks: StockRecord[], mode: ImportMode) => {
  switch (mode) {
    case 'replace':
      // å®Œå…¨æ›¿æ›ç¾æœ‰è³‡æ–™
      setAccounts(accounts);
      setStocks(stocks);
      break;
      
    case 'merge':
      // åˆä½µè³‡æ–™ï¼Œé‡è¤‡çš„ä»¥æ–°è³‡æ–™ç‚ºæº–
      const mergedAccounts = mergeAccounts(existingAccounts, accounts);
      const mergedStocks = mergeStocks(existingStocks, stocks);
      setAccounts(mergedAccounts);
      setStocks(mergedStocks);
      break;
      
    case 'skip':
      // è·³éé‡è¤‡è³‡æ–™ï¼Œä¿ç•™ç¾æœ‰è³‡æ–™
      const newAccounts = accounts.filter(acc => !existingAccounts.find(e => e.id === acc.id));
      const newStocks = stocks.filter(stock => !existingStocks.find(e => e.id === stock.id));
      setAccounts([...existingAccounts, ...newAccounts]);
      setStocks([...existingStocks, ...newStocks]);
      break;
  }
};
```

---

## ğŸ¨ ç”¨æˆ¶ä»‹é¢ç³»çµ±

### 1. è¨­è¨ˆç³»çµ±è¦ç¯„

#### 1.1 è‰²å½©ç³»çµ±
```css
/* ä¸»è¦è‰²å½© */
--primary-bg: #0f172a;        /* æ·±è‰²èƒŒæ™¯ */
--secondary-bg: #1e293b;      /* æ¬¡è¦èƒŒæ™¯ */
--accent-bg: #334155;         /* å¼·èª¿èƒŒæ™¯ */

/* åŠŸèƒ½è‰²å½© */
--success: #10b981;           /* æˆåŠŸ/ä¸Šæ¼² */
--danger: #ef4444;            /* éŒ¯èª¤/ä¸‹è·Œ */
--warning: #f59e0b;           /* è­¦å‘Š */
--info: #3b82f6;              /* è³‡è¨Š */

/* æ–‡å­—è‰²å½© */
--text-primary: #f8fafc;      /* ä¸»è¦æ–‡å­— */
--text-secondary: #cbd5e1;    /* æ¬¡è¦æ–‡å­— */
--text-muted: #64748b;        /* å¼±åŒ–æ–‡å­— */
```

#### 1.2 çµ±ä¸€åœ–ç¤ºç³»çµ±
```typescript
// src/components/ui/Icons.tsx
export const Icons = {
  Check: ({ size = 'md', className = '' }) => (
    <svg className={`${sizeClasses[size]} ${className}`}>
      <path d="M9 12l2 2 4-4" strokeWidth="3" />
    </svg>
  ),
  
  X: ({ size = 'md', className = '' }) => (
    <svg className={`${sizeClasses[size]} ${className}`}>
      <path d="M18 6L6 18M6 6l12 12" strokeWidth="3" />
    </svg>
  ),
  
  Edit: ({ size = 'md', className = '' }) => (
    <svg className={`${sizeClasses[size]} ${className}`}>
      <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" strokeWidth="2" />
    </svg>
  )
};

const sizeClasses = {
  sm: 'w-4 h-4',   // 16px
  md: 'w-5 h-5',   // 20px  
  lg: 'w-6 h-6'    // 24px
};
```

#### 1.3 æŒ‰éˆ•è¨­è¨ˆè¦ç¯„
```typescript
// æŒ‰éˆ•æ¨£å¼æ¨™æº–
const buttonStyles = {
  success: 'bg-green-600 hover:bg-green-700 text-white',
  danger: 'bg-red-600 hover:bg-red-700 text-white',
  neutral: 'bg-slate-600 hover:bg-slate-700 text-white',
  
  sizes: {
    sm: 'h-6 px-2 text-xs',
    md: 'h-8 px-3 text-sm', 
    lg: 'h-10 px-4 text-base'
  }
};
```

### 2. éŸ¿æ‡‰å¼è¨­è¨ˆ

#### 2.1 æ–·é»ç³»çµ±
```css
/* TailwindCSS æ–·é» */
sm: 640px    /* å°å‹è¨­å‚™ */
md: 768px    /* å¹³æ¿è¨­å‚™ */
lg: 1024px   /* æ¡Œé¢è¨­å‚™ */
xl: 1280px   /* å¤§å‹æ¡Œé¢ */
2xl: 1536px  /* è¶…å¤§æ¡Œé¢ */
```

#### 2.2 ä½ˆå±€é©é…
```typescript
// éŸ¿æ‡‰å¼ä½ˆå±€çµ„ä»¶
const Layout = () => (
  <div className="min-h-screen bg-slate-900 text-white">
    {/* æ¡Œé¢ç‰ˆå´é‚Šæ¬„ */}
    <div className="hidden lg:block fixed left-0 top-0 h-full w-64">
      <Sidebar />
    </div>
    
    {/* ä¸»è¦å…§å®¹å€ */}
    <div className="lg:ml-64">
      <Header />
      <main className="p-4 lg:p-6">
        {children}
      </main>
    </div>
    
    {/* ç§»å‹•ç‰ˆåº•éƒ¨å°èˆª */}
    <div className="lg:hidden fixed bottom-0 left-0 right-0">
      <MobileNavigation />
    </div>
  </div>
);
```

### 3. éš±ç§ä¿è­·æ©Ÿåˆ¶

#### 3.1 éš±ç§æ¨¡å¼å¯¦ä½œ
```typescript
// éš±ç§æ¨¡å¼ç‹€æ…‹ç®¡ç†
interface PrivacyState {
  isPrivacyMode: boolean;
  togglePrivacyMode: () => void;
}

// æ•æ„Ÿè³‡æ–™é¡¯ç¤ºé‚è¼¯
const formatSensitiveData = (value: number, isPrivacyMode: boolean) => {
  if (isPrivacyMode) {
    return '***,***';
  }
  return value.toLocaleString('zh-TW');
};
```

#### 3.2 éš±ç§ä¿è­·ç¯„åœ
- **é‡‘é¡è³‡è¨Š**: è‚¡åƒ¹ã€å¸‚å€¼ã€æç›Šã€è‚¡æ¯
- **æŒè‚¡æ•¸é‡**: è‚¡ç¥¨æŒæœ‰æ•¸é‡
- **æŠ•è³‡çµ„åˆçµ±è¨ˆ**: ç¸½å¸‚å€¼ã€ç¸½æç›Šç­‰
- **å€‹äººè³‡æ–™**: å¸³æˆ¶åç¨±å¯é¸æ“‡éš±è—

---

## ğŸ”§ æŠ€è¡“å¯¦ä½œè¦æ ¼

### 1. ç‹€æ…‹ç®¡ç†ç³»çµ±

#### 1.1 Zustand Store æ¶æ§‹
```typescript
interface AppState {
  // UI ç‹€æ…‹
  isSidebarOpen: boolean;
  isAccountManagerOpen: boolean;
  isAddStockFormOpen: boolean;
  
  // å¸³æˆ¶ç‹€æ…‹  
  currentAccount: string;
  accounts: Account[];
  
  // è‚¡ç¥¨ç‹€æ…‹
  stocks: StockRecord[];
  
  // è¨­å®šç‹€æ…‹
  isPrivacyMode: boolean;
  rightsAdjustmentMode: 'excluding_rights' | 'including_rights';
  
  // è‚¡åƒ¹æ›´æ–°ç‹€æ…‹
  isUpdatingPrices: boolean;
  lastPriceUpdate: Date | null;
  priceUpdateProgress: { current: number; total: number; };
  
  // é›²ç«¯åŒæ­¥ç‹€æ…‹
  cloudSync: {
    isEnabled: boolean;
    token: string;
    gistId?: string;
    lastSync?: Date;
  };
}
```

#### 1.2 æŒä¹…åŒ–ç­–ç•¥
```typescript
// Zustand æŒä¹…åŒ–é…ç½®
persist(
  (set, get) => ({ ...storeActions }),
  {
    name: 'stock-portfolio-storage-v7',
    
    // é¸æ“‡æ€§æŒä¹…åŒ–
    partialize: (state) => ({
      currentAccount: state.currentAccount,
      accounts: state.accounts,
      stocks: state.stocks,
      isPrivacyMode: state.isPrivacyMode,
      rightsAdjustmentMode: state.rightsAdjustmentMode,
      cloudSync: state.cloudSync
    }),
    
    // ç‰ˆæœ¬é·ç§»
    onRehydrateStorage: () => (state, error) => {
      if (error) {
        localStorage.removeItem('stock-portfolio-storage-v6');
        localStorage.removeItem('stock-portfolio-storage-v7');
        return;
      }
      
      if (state) {
        // æ¸…ç†èˆŠç‰ˆæœ¬éºç•™ç‹€æ…‹
        if ((state as any).oldField !== undefined) {
          delete (state as any).oldField;
        }
        
        // ç¢ºä¿æ–°ç‹€æ…‹å­˜åœ¨
        if (!state.rightsAdjustmentMode) {
          state.rightsAdjustmentMode = 'excluding_rights';
        }
      }
    }
  }
)
```

### 2. API æ•´åˆç³»çµ±

#### 2.1 API å„ªå…ˆé †åºç­–ç•¥ (æ•´åˆ Stock List)

##### æœ¬æ©Ÿç«¯ API å„ªå…ˆé †åº
```
è‚¡åƒ¹ç²å–æµç¨‹:
1. å¾ Stock List ç²å–è‚¡ç¥¨åŸºæœ¬è³‡è¨Š (åç¨±ã€å¸‚å ´é¡å‹ã€Yahooå¾Œç¶´)
2. Yahoo Finance API (é€éå¾Œç«¯ä»£ç†) - ä½¿ç”¨ Stock List æä¾›çš„å¾Œç¶´
3. FinMind API (é€éå¾Œç«¯ä»£ç†) - å‚™æ´è‚¡åƒ¹ä¾†æº

æœå°‹æµç¨‹:
1. å¾Œç«¯æœå°‹ API (æ•´åˆ Stock List + å³æ™‚è‚¡åƒ¹)
2. å‰ç«¯ç›´æ¥æœå°‹ (Stock List æœå°‹ + é›²ç«¯è‚¡åƒ¹ API)

é™¤æ¬Šæ¯æŸ¥è©¢:
1. FinMind API - æ­·å²è³‡æ–™æœ€å®Œæ•´
2. è­‰äº¤æ‰€ OpenAPI - å®˜æ–¹è³‡æ–™
```

##### é›²ç«¯ API å„ªå…ˆé †åº  
```
è‚¡åƒ¹ç²å–æµç¨‹:
1. å¾ Stock List ç²å–è‚¡ç¥¨åŸºæœ¬è³‡è¨Š (åç¨±ã€å¸‚å ´é¡å‹ã€Yahooå¾Œç¶´)
2. Vercel Edge Functions - æœ€ç©©å®šï¼Œä½¿ç”¨ Stock List å¾Œç¶´è³‡è¨Š
3. Yahoo Finance (AllOrigins) - ç¬¬ä¸‰æ–¹ä»£ç†
4. Yahoo Finance (CodeTabs) - ç¬¬ä¸‰æ–¹ä»£ç†
5. Yahoo Finance (ThingProxy) - ç¬¬ä¸‰æ–¹ä»£ç†

æœå°‹æµç¨‹:
1. å‰ç«¯ç›´æ¥æœå°‹ (Stock List æœå°‹ + é›²ç«¯è‚¡åƒ¹ API)

é™¤æ¬Šæ¯æŸ¥è©¢:
1. FinMind API - æ­·å²è³‡æ–™æœ€å®Œæ•´
2. è­‰äº¤æ‰€ OpenAPI - å®˜æ–¹è³‡æ–™
```

##### Stock List èˆ‡ API æ•´åˆç¯„ä¾‹
```typescript
// æ•´åˆ Stock List çš„è‚¡åƒ¹ç²å–
async function getStockPriceWithStockList(symbol: string): Promise<StockPrice | null> {
  // 1. å¾ Stock List ç²å–åŸºæœ¬è³‡è¨Š
  const stockListData = await stockListService.loadStockList();
  const stockInfo = stockListData?.stocks[symbol];
  
  if (!stockInfo) {
    logger.warn('stock', `è‚¡ç¥¨ä»£ç¢¼ ${symbol} ä¸åœ¨ Stock List ä¸­`);
    return null;
  }
  
  // 2. æ ¹æ“šç’°å¢ƒé¸æ“‡ API ç­–ç•¥
  const envInfo = stockListService.getEnvironmentInfo();
  let priceData: StockPrice | null = null;
  
  if (envInfo.isDevelopment) {
    // æœ¬æ©Ÿç«¯ï¼šä½¿ç”¨å¾Œç«¯ä»£ç†
    priceData = await stockPriceService.getStockPrice(symbol);
  } else {
    // é›²ç«¯ï¼šä½¿ç”¨ Netlify Functionsï¼Œå‚³å…¥ Stock List çš„å¾Œç¶´è³‡è¨Š
    const yahooSymbol = `${symbol}${stockInfo.yahooSuffix}`;
    priceData = await cloudStockPriceService.getStockPrice(symbol);
  }
  
  // 3. æ•´åˆ Stock List è³‡è¨Šåˆ°çµæœä¸­
  if (priceData) {
    return {
      ...priceData,
      name: stockInfo.name,           // ä¾†è‡ª Stock List
      market: stockInfo.market,       // ä¾†è‡ª Stock List
      marketType: stockInfo.marketType, // ä¾†è‡ª Stock List
      industry: stockInfo.industry    // ä¾†è‡ª Stock List
    };
  }
  
  return null;
}
```

#### 2.2 éŒ¯èª¤è™•ç†è¦ç¯„
```typescript
// æ¨™æº– API éŒ¯èª¤è™•ç†
const apiCall = async (url: string) => {
  try {
    const response = await fetch(url, { timeout: 10000 });
    
    if (!response.ok) {
      if (response.status === 404) {
        // 404 æ˜¯æ­£å¸¸æƒ…æ³ï¼Œä¸è¼¸å‡ºè­¦å‘Š
        return null;
      }
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    }
    
    return await response.json();
  } catch (error) {
    const message = error instanceof Error ? error.message : 'æœªçŸ¥éŒ¯èª¤';
    logger.error('api', `API èª¿ç”¨å¤±æ•—: ${message}`);
    return null; // ä¸æä¾›è™›å‡è³‡æ–™
  }
};
```

### 3. æ—¥èªŒç³»çµ±

#### 3.1 Logger æ¶æ§‹
```typescript
// æ—¥èªŒç­‰ç´šå®šç¾©
enum LogLevel {
  ERROR = 0,   // éŒ¯èª¤ï¼šå¿…é ˆé¡¯ç¤º
  WARN = 1,    // è­¦å‘Šï¼šé‡è¦æç¤º  
  INFO = 2,    // è³‡è¨Šï¼šä¸€èˆ¬è¨Šæ¯ï¼ˆé è¨­ï¼‰
  DEBUG = 3,   // èª¿è©¦ï¼šè©³ç´°è³‡è¨Š
  TRACE = 4    // è¿½è¹¤ï¼šè¶…è©³ç´°è³‡è¨Š
}

// æ¨¡çµ„åˆ†é¡
type LogModule = 'global' | 'dividend' | 'stock' | 'api' | 'cloud' | 'import' | 'export' | 'rights';
```

#### 3.2 Logger ä½¿ç”¨è¦ç¯„
```typescript
// æ­£ç¢ºçš„æ—¥èªŒä½¿ç”¨æ–¹å¼
logger.error('dividend', 'æ›´æ–°å¤±æ•—', error);
logger.warn('api', 'API å›æ‡‰æ…¢', { time: 5000 });
logger.info('stock', 'è‚¡åƒ¹æ›´æ–°å®Œæˆ', { count: 10 });
logger.debug('dividend', 'è¨ˆç®—é…è‚¡', { shares: 100 });
logger.success('import', 'åŒ¯å…¥å®Œæˆ', { accounts: 5 });

// ç¦æ­¢çš„åšæ³•
console.log('ğŸ” é–‹å§‹è™•ç†...', fullData); // âŒ ç›´æ¥ä½¿ç”¨ console.log
```

### 4. å»ºç½®èˆ‡éƒ¨ç½²

#### 4.1 é–‹ç™¼ç’°å¢ƒé…ç½®
```json
// package.json scripts
{
  "scripts": {
    "dev": "vite",
    "build": "vite build", 
    "preview": "vite preview",
    "test": "vitest",
    "lint": "eslint . --ext ts,tsx",
    "check:all": "npm run check:version && npm run check:svg && npm run lint",
    "check:version": "node scripts/check-version-consistency.js",
    "check:svg": "node scripts/check-svg-format.js"
  }
}
```

#### 4.2 ç’°å¢ƒè®Šæ•¸é…ç½®
```bash
# .env.local (æœ¬æ©Ÿç«¯é–‹ç™¼)
VITE_API_BASE_URL=http://localhost:3001
VITE_FINMIND_TOKEN=your_finmind_token
VITE_DEV_SERVER_URL=http://localhost:5173

# .env.production (ç”Ÿç”¢ç’°å¢ƒ)
VITE_API_BASE_URL=https://stock-portfolio-system.netlify.app/.netlify/functions
```

#### 4.3 å»ºç½®é…ç½®
```typescript
// vite.config.ts
export default defineConfig({
  plugins: [react()],
  build: {
    target: 'es2015',
    outDir: 'dist',
    assetsDir: 'assets',
    sourcemap: false,
    minify: 'terser',
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          utils: ['zustand', 'date-fns']
        }
      }
    }
  },
  server: {
    port: 5173,
    host: true
  }
});
```

---

## ğŸ›¡ï¸ å®‰å…¨èˆ‡å“è³ªä¿è­‰

### 1. é–‹ç™¼æ¨™æº–è¦ç¯„

#### 1.1 å®‰å…¨é–‹ç™¼åŸå‰‡
- **ç–ŠåŠ å¼é–‹ç™¼**: åªæ·»åŠ åŠŸèƒ½ï¼Œä¸ç ´å£ç¾æœ‰åŠŸèƒ½
- **åŠŸèƒ½é–‹é—œ**: æ–°åŠŸèƒ½å¯ä»¥å®‰å…¨åœ°é–‹å•Ÿ/é—œé–‰
- **å¿«é€Ÿå›æ»¾**: å‡ºå•é¡Œèƒ½ç«‹å³æ¢å¾©åˆ°ç©©å®šç‰ˆæœ¬
- **éŒ¯èª¤éš”é›¢**: å–®ä¸€åŠŸèƒ½å¤±æ•—ä¸å½±éŸ¿æ•´é«”ç³»çµ±

#### 1.2 ä»£ç¢¼å“è³ªæª¢æŸ¥
```bash
# å®Œæ•´å“è³ªæª¢æŸ¥æµç¨‹
npm run check:all

# åŒ…å«ä»¥ä¸‹æª¢æŸ¥é …ç›®:
npm run check:version    # ç‰ˆæœ¬è™Ÿä¸€è‡´æ€§æª¢æŸ¥
npm run check:svg        # SVG æ ¼å¼æª¢æŸ¥  
npm run check:state      # ç‹€æ…‹ç®¡ç†æª¢æŸ¥
npm run check:rights     # é™¤æ¬Šæ¯è¨ˆç®—æª¢æŸ¥
npm run lint             # ESLint ä»£ç¢¼æª¢æŸ¥
npm run test             # å–®å…ƒæ¸¬è©¦
```

### 2. ç‰ˆæœ¬ç®¡ç†è¦ç¯„

#### 2.1 ç‰ˆæœ¬è™Ÿç³»çµ±
```
æ ¼å¼: v{MAJOR}.{MINOR}.{RELEASE}.{PATCH}
ç¯„ä¾‹: v1.0.2.0339

MAJOR: ä¸»è¦ç‰ˆæœ¬ (é‡å¤§æ¶æ§‹è®Šæ›´)
MINOR: æ¬¡è¦ç‰ˆæœ¬ (æ–°åŠŸèƒ½æ·»åŠ )  
RELEASE: ç™¼å¸ƒç‰ˆæœ¬ (ç©©å®šç‰ˆæœ¬ç™¼å¸ƒ)
PATCH: ä¿®è£œç‰ˆæœ¬ (éŒ¯èª¤ä¿®å¾©ã€å°æ”¹é€²)
```

#### 2.2 ä¸‰è™•åŒæ­¥æ›´æ–°
```typescript
// 1. package.json
"version": "1.0.2.0339"

// 2. src/constants/version.ts  
PATCH: 339

// 3. src/constants/changelog.ts
{
  version: '1.0.2.0339',
  date: '2026-01-27',
  changes: ['ä¿®å¾©å…§å®¹...']
}
```

#### 2.3 ç‰ˆæœ¬æ­¸æª”è¦ç¯„
```bash
# GitHub ä¸Šå‚³å‰å¿…é ˆæ­¸æª”
mkdir github-releases/github-release-v1.0.2.0339

# è¤‡è£½å°ˆæ¡ˆæª”æ¡ˆï¼ˆæ’é™¤ä¸éœ€è¦çš„ç›®éŒ„ï¼‰
robocopy . github-releases/github-release-v1.0.2.0339 /E /XD node_modules dist .git export github-releases

# é©—è­‰æ­¸æª”å®Œæ•´æ€§å¾Œæ‰èƒ½ä¸Šå‚³
git push origin main
```

### 3. å‚™æ´èˆ‡æ¢å¾©æ©Ÿåˆ¶

#### 3.1 è‡ªå‹•å‚™ä»½ç­–ç•¥
```typescript
// é—œéµæ“ä½œå‰è‡ªå‹•å‚™ä»½
const createBackup = async (type: 'pre_import' | 'pre_reset' | 'pre_sync') => {
  const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
  const filename = `${type}_${timestamp}.json`;
  
  const backupData = {
    accounts: useAppStore.getState().accounts,
    stocks: useAppStore.getState().stocks,
    settings: {
      isPrivacyMode: useAppStore.getState().isPrivacyMode,
      rightsAdjustmentMode: useAppStore.getState().rightsAdjustmentMode
    },
    metadata: {
      version: VERSION.FULL,
      backupDate: new Date().toISOString(),
      backupType: type
    }
  };
  
  // ä¿å­˜åˆ° export/backups/ ç›®éŒ„
  await saveBackupFile(filename, backupData);
};
```

#### 3.2 æ¢å¾©æ©Ÿåˆ¶
```typescript
// è‡ªå‹•æ¢å¾©è§¸ç™¼æ¢ä»¶
const shouldAutoRecover = () => {
  // æª¢æ¸¬ç³»çµ±å´©æ½°
  const lastSession = localStorage.getItem('last-session-timestamp');
  const now = Date.now();
  
  if (lastSession && (now - parseInt(lastSession)) > 5 * 60 * 1000) {
    return true; // è¶…é5åˆ†é˜æœªæ­£å¸¸é—œé–‰
  }
  
  // æª¢æ¸¬è³‡æ–™ç•°å¸¸
  const accounts = useAppStore.getState().accounts;
  if (!accounts || accounts.length === 0) {
    return true; // å¸³æˆ¶è³‡æ–™éºå¤±
  }
  
  return false;
};
```

---

## ğŸ“Š æ€§èƒ½èˆ‡ç›£æ§

### 1. æ€§èƒ½æŒ‡æ¨™

#### 1.1 è¼‰å…¥æ€§èƒ½ç›®æ¨™
```
é¦–æ¬¡å…§å®¹ç¹ªè£½ (FCP): < 1.5s
æœ€å¤§å…§å®¹ç¹ªè£½ (LCP): < 2.5s  
ç´¯ç©ç‰ˆé¢åç§» (CLS): < 0.1
é¦–æ¬¡è¼¸å…¥å»¶é² (FID): < 100ms
```

#### 1.2 åŠŸèƒ½æ€§èƒ½ç›®æ¨™
```
è‚¡åƒ¹æ›´æ–° (å–®æ”¯): < 3s
è‚¡åƒ¹æ›´æ–° (æ‰¹æ¬¡10æ”¯): < 10s
é™¤æ¬Šæ¯è¨ˆç®—: < 2s
è³‡æ–™åŒ¯å…¥åŒ¯å‡º: < 5s
é›²ç«¯åŒæ­¥: < 8s
```

### 2. å¿«å–ç­–ç•¥

#### 2.1 æœ¬æ©Ÿç«¯å¿«å–
```typescript
// å¾Œç«¯æœå‹™å¿«å– (5ç§’)
const stockCache = new Map();
const CACHE_DURATION = 5000;

// å‰ç«¯å¿«å– (5åˆ†é˜)
const frontendCache = new Map();
const FRONTEND_CACHE_DURATION = 5 * 60 * 1000;
```

#### 2.2 é›²ç«¯å¿«å–
```typescript
// Netlify Functions HTTP å¿«å–
headers: {
  'Cache-Control': 'public, max-age=60', // 1åˆ†é˜å¿«å–
}

// å‰ç«¯é›²ç«¯æœå‹™å¿«å– (5åˆ†é˜)
class CloudStockPriceService {
  private cache = new Map();
  private readonly CACHE_DURATION = 5 * 60 * 1000;
}
```

### 3. éŒ¯èª¤ç›£æ§

#### 3.1 éŒ¯èª¤åˆ†é¡
```typescript
// API éŒ¯èª¤ç›£æ§
interface APIError {
  type: 'network' | 'timeout' | 'server' | 'client';
  endpoint: string;
  statusCode?: number;
  message: string;
  timestamp: Date;
}

// æ¥­å‹™é‚è¼¯éŒ¯èª¤
interface BusinessError {
  type: 'calculation' | 'validation' | 'data_integrity';
  module: string;
  operation: string;
  details: any;
  timestamp: Date;
}
```

#### 3.2 éŒ¯èª¤è™•ç†ç­–ç•¥
```typescript
// å„ªé›…é™ç´šè™•ç†
const handleAPIError = (error: APIError) => {
  switch (error.type) {
    case 'network':
      // é¡¯ç¤ºç¶²è·¯éŒ¯èª¤æç¤ºï¼Œæä¾›é‡è©¦é¸é …
      showErrorMessage('ç¶²è·¯é€£ç·šç•°å¸¸ï¼Œè«‹æª¢æŸ¥ç¶²è·¯è¨­å®šå¾Œé‡è©¦');
      break;
      
    case 'timeout':
      // é¡¯ç¤ºè¶…æ™‚æç¤ºï¼Œè‡ªå‹•é‡è©¦
      showErrorMessage('è«‹æ±‚è¶…æ™‚ï¼Œæ­£åœ¨è‡ªå‹•é‡è©¦...');
      autoRetry();
      break;
      
    case 'server':
      // é¡¯ç¤ºæœå‹™å™¨éŒ¯èª¤ï¼Œå»ºè­°ç¨å¾Œé‡è©¦
      showErrorMessage('æœå‹™æš«æ™‚ä¸å¯ç”¨ï¼Œè«‹ç¨å¾Œå†è©¦');
      break;
      
    default:
      // é€šç”¨éŒ¯èª¤è™•ç†
      showErrorMessage('æ“ä½œå¤±æ•—ï¼Œè«‹é‡è©¦æˆ–è¯ç¹«å®¢æœ');
  }
};
```

---

## ğŸ”® æœªä¾†ç™¼å±•è¦åŠƒ

### 1. çŸ­æœŸç›®æ¨™ (v1.1.x)

#### 1.1 åŠŸèƒ½å¢å¼·
- **æŠ€è¡“åˆ†ææ¨¡çµ„**: æ·»åŠ åŸºæœ¬æŠ€è¡“æŒ‡æ¨™ (MA, RSI, MACD)
- **å ±è¡¨ç³»çµ±**: ç”ŸæˆæŠ•è³‡ç¸¾æ•ˆå ±è¡¨å’Œåœ–è¡¨
- **æé†’ç³»çµ±**: è‚¡åƒ¹æé†’å’Œé™¤æ¬Šæ¯æé†’
- **æ‰¹æ¬¡æ“ä½œ**: æ‰¹æ¬¡ç·¨è¼¯è‚¡ç¥¨è³‡è¨Š

#### 1.2 ç”¨æˆ¶é«”é©—å„ªåŒ–
- **å¿«æ·éµæ”¯æ´**: å¸¸ç”¨æ“ä½œå¿«æ·éµ
- **æ‹–æ‹½æ’åº**: è‚¡ç¥¨åˆ—è¡¨æ‹–æ‹½æ’åº
- **æœå°‹å¢å¼·**: æ¨¡ç³Šæœå°‹å’Œæ­·å²è¨˜éŒ„
- **ä¸»é¡Œç³»çµ±**: å¤šç¨®æ·±è‰²ä¸»é¡Œé¸æ“‡

### 2. ä¸­æœŸç›®æ¨™ (v1.2.x)

#### 2.1 å¸‚å ´æ“´å±•
- **ç¾è‚¡æ”¯æ´**: æ•´åˆç¾è‚¡è³‡æ–™å’Œäº¤æ˜“æ™‚é–“
- **æ¸¯è‚¡æ”¯æ´**: æ·»åŠ æ¸¯è‚¡å¸‚å ´æ”¯æ´
- **åŠ å¯†è²¨å¹£**: æ”¯æ´ä¸»æµåŠ å¯†è²¨å¹£è¿½è¹¤
- **å¤–åŒ¯å¸‚å ´**: åŒ¯ç‡è¿½è¹¤å’Œæ›ç®—

#### 2.2 é€²éšåŠŸèƒ½
- **æŠ•è³‡çµ„åˆåˆ†æ**: é¢¨éšªè©•ä¼°å’Œè³‡ç”¢é…ç½®å»ºè­°
- **å›æ¸¬ç³»çµ±**: æ­·å²æŠ•è³‡ç­–ç•¥å›æ¸¬
- **API é–‹æ”¾**: æä¾›ç¬¬ä¸‰æ–¹æ•´åˆ API
- **è¡Œå‹•æ‡‰ç”¨**: PWA æˆ–åŸç”Ÿ App é–‹ç™¼

### 3. é•·æœŸç›®æ¨™ (v2.0.x)

#### 3.1 æ™ºèƒ½åŒ–åŠŸèƒ½
- **AI åˆ†æ**: æ©Ÿå™¨å­¸ç¿’æŠ•è³‡å»ºè­°
- **æ™ºèƒ½æé†’**: åŸºæ–¼ç”¨æˆ¶è¡Œç‚ºçš„å€‹æ€§åŒ–æé†’
- **è‡ªå‹•åŒ–äº¤æ˜“**: æ•´åˆåˆ¸å•† API å¯¦ç¾è‡ªå‹•äº¤æ˜“
- **é¢¨éšªç®¡ç†**: æ™ºèƒ½é¢¨éšªæ§åˆ¶å’Œé è­¦

#### 3.2 ç¤¾ç¾¤èˆ‡å”ä½œ
- **æŠ•è³‡çµ„åˆåˆ†äº«**: åŒ¿ååˆ†äº«æŠ•è³‡çµ„åˆ
- **ç¤¾ç¾¤è¨è«–**: æŠ•è³‡å¿ƒå¾—å’Œç­–ç•¥è¨è«–
- **å°ˆå®¶åˆ†æ**: å°ˆæ¥­åˆ†æå¸«è§€é»æ•´åˆ
- **æ•™è‚²å…§å®¹**: æŠ•è³‡æ•™å­¸å’Œå¸‚å ´åˆ†æ

---

## ğŸ“ é™„éŒ„

### A. é–‹ç™¼ç’°å¢ƒè¨­å®š

#### A.1 ç³»çµ±è¦æ±‚
```
Node.js: >= 18.0.0
npm: >= 8.0.0
Git: >= 2.30.0
ç€è¦½å™¨: Chrome/Firefox/Safari æœ€æ–°ç‰ˆæœ¬
```

#### A.2 å®‰è£æ­¥é©Ÿ
```bash
# 1. å…‹éš†å°ˆæ¡ˆ
git clone https://github.com/username/stock-portfolio-system.git
cd stock-portfolio-system

# 2. å®‰è£ä¾è³´
npm install

# 3. è¨­å®šç’°å¢ƒè®Šæ•¸
cp .env.example .env.local
# ç·¨è¼¯ .env.local è¨­å®š API Token

# 4. å•Ÿå‹•å¾Œç«¯æœå‹™ (æœ¬æ©Ÿç«¯é–‹ç™¼)
cd backend
npm install
npm start

# 5. å•Ÿå‹•å‰ç«¯æœå‹™
cd ..
npm run dev
```

### B. API æ–‡æª”

#### B.1 æœ¬æ©Ÿç«¯ API
```
GET /api/stock/:symbol          - ç²å–è‚¡ç¥¨è³‡è¨Š
GET /api/stock-search?query=    - æœå°‹è‚¡ç¥¨
GET /api/dividend/:symbol       - ç²å–é™¤æ¬Šæ¯è³‡æ–™
GET /health                     - å¥åº·æª¢æŸ¥
```

#### B.2 Netlify Functions API
```
GET /.netlify/functions/stock?symbol=           - ç²å–è‚¡ç¥¨è³‡è¨Š
GET /.netlify/functions/stock-search?query=     - æœå°‹è‚¡ç¥¨  
GET /.netlify/functions/dividend?symbol=        - ç²å–é™¤æ¬Šæ¯è³‡æ–™
GET /.netlify/functions/health                  - å¥åº·æª¢æŸ¥
```

### C. æ•…éšœæ’é™¤

#### C.1 å¸¸è¦‹å•é¡Œ
```
Q: æœ¬æ©Ÿç«¯è‚¡åƒ¹æ›´æ–°å¤±æ•—
A: æª¢æŸ¥å¾Œç«¯æœå‹™æ˜¯å¦å•Ÿå‹• (localhost:3001)

Q: é›²ç«¯ç’°å¢ƒ CORS éŒ¯èª¤  
A: ç¢ºèªä½¿ç”¨ Netlify Functions è€Œéç›´æ¥ API èª¿ç”¨

Q: é™¤æ¬Šæ¯è¨ˆç®—éŒ¯èª¤
A: æª¢æŸ¥ RightsEventService æ˜¯å¦æ­£ç¢ºå°å…¥ logger

Q: ç‰ˆæœ¬è™Ÿä¸ä¸€è‡´
A: åŸ·è¡Œ npm run check:version æª¢æŸ¥ä¸¦æ‰‹å‹•åŒæ­¥
```

#### C.2 èª¿è©¦å·¥å…·
```javascript
// ç€è¦½å™¨ Console èª¿è©¦å·¥å…·
window.debugAppStore = {
  getState: () => useAppStore.getState(),
  clearStorage: () => localStorage.clear(),
  validateState: () => /* é©—è­‰é‚è¼¯ */
};
```

### D. è²¢ç»æŒ‡å—

#### D.1 é–‹ç™¼æµç¨‹
```
1. Fork å°ˆæ¡ˆä¸¦å»ºç«‹åŠŸèƒ½åˆ†æ”¯
2. éµå¾ª STEERING è¦å‰‡é–‹ç™¼
3. åŸ·è¡Œå®Œæ•´æ¸¬è©¦ (npm run check:all)
4. æäº¤ Pull Request
5. Code Review å’Œåˆä½µ
```

#### D.2 æäº¤è¦ç¯„
```
feat: æ–°åŠŸèƒ½
fix: éŒ¯èª¤ä¿®å¾©  
docs: æ–‡æª”æ›´æ–°
style: ä»£ç¢¼æ ¼å¼èª¿æ•´
refactor: ä»£ç¢¼é‡æ§‹
test: æ¸¬è©¦ç›¸é—œ
chore: å»ºç½®å·¥å…·æˆ–è¼”åŠ©å·¥å…·è®Šå‹•
```

---

**æ–‡æª”ç‰ˆæœ¬**: v1.0.2.0341  
**æœ€å¾Œæ›´æ–°**: 2026-01-27  
**ç¶­è­·è€…**: Stock Portfolio System é–‹ç™¼åœ˜éšŠ

**é‡è¦èªªæ˜**: æœ¬è¦æ ¼æ–‡æª”åŸºæ–¼å¯¦éš›é‹è¡Œçš„ç³»çµ±åŠŸèƒ½ç·¨å¯«ï¼Œç¶“éå…¨é¢çš„ STEERING è¦å‰‡æª¢æŸ¥å’Œç‰ˆæœ¬ä¸€è‡´æ€§é©—è­‰ã€‚æ˜ç¢ºå®šç¾©äº†æœ¬æ©Ÿç«¯å’Œé›²ç«¯ç’°å¢ƒçš„ä¸åŒå·¥ä½œæ©Ÿåˆ¶ï¼Œç‰¹åˆ¥å¼·èª¿äº† Stock List ç³»çµ±ä½œç‚ºè‚¡ç¥¨åç¨±å’Œå¸‚å ´è³‡è¨Šçš„å–®ä¸€çœŸç›¸ä¾†æºï¼Œä»¥åŠæ¯æ—¥è‡ªå‹•æ›´æ–°æ©Ÿåˆ¶ï¼Œç¢ºä¿é–‹ç™¼è€…èƒ½å¤ æº–ç¢ºç†è§£ç³»çµ±æ¶æ§‹å’Œå¯¦ä½œç´°ç¯€ã€‚æ‰€æœ‰åŠŸèƒ½å¯¦ä½œéƒ½éµå¾ª STEERING è¦ç¯„ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬ç®¡ç†ã€API æ¨™æº–ã€é–‹ç™¼æ¨™æº–ã€UI è¨­è¨ˆæ¨™æº–ç­‰ã€‚