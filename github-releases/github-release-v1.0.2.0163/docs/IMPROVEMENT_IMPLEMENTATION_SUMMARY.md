# æ”¹é€²æªæ–½å¯¦æ–½ç¸½çµ

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. ä¸‰å±¤é˜²è­·æ©Ÿåˆ¶

#### ç¬¬ä¸€å±¤ï¼šé–‹ç™¼å‰è‡ªå‹•æé†’
- âœ… å‰µå»º `scripts/dev-assistant.cjs`
- âœ… æ ¹æ“šä¿®æ”¹çš„æª”æ¡ˆè‡ªå‹•æç¤ºç›¸é—œ STEERING è¦å‰‡
- âœ… é¡¯ç¤ºå¸¸è¦‹å•é¡Œæª¢æŸ¥æ¸…å–®
- âœ… æ·»åŠ  `npm run dev:assistant` å‘½ä»¤

**æ¸¬è©¦çµæœ**ï¼šâœ… æ­£å¸¸é‹ä½œï¼Œèƒ½æ­£ç¢ºè­˜åˆ¥ä¿®æ”¹çš„æª”æ¡ˆä¸¦æç¤ºç›¸é—œè¦å‰‡

#### ç¬¬äºŒå±¤ï¼šæäº¤å‰å¼·åˆ¶æª¢æŸ¥
- âœ… å¢å¼· `scripts/pre-commit-check.bat`
- âœ… å‰µå»º `scripts/check-state-management.cjs`
- âœ… å‰µå»º `scripts/check-rights-calculation.cjs`
- âœ… æ·»åŠ  6 å€‹æª¢æŸ¥æ­¥é©Ÿï¼ˆåŸæœ¬ 4 å€‹ï¼‰

**æ¸¬è©¦çµæœ**ï¼š
- âœ… ç‹€æ…‹ç®¡ç†æª¢æŸ¥ï¼šæ­£å¸¸é‹ä½œï¼Œèƒ½æª¢æ¸¬ partialize é…ç½®
- âš ï¸ é™¤æ¬Šæ¯è¨ˆç®—æª¢æŸ¥ï¼šç™¼ç¾å¯¦éš›å•é¡Œï¼ˆå¤šè¡Œèª¿ç”¨çš„èª¤å ±éœ€è¦æ”¹é€²ï¼‰

#### ç¬¬ä¸‰å±¤ï¼šé–‹ç™¼æµç¨‹æ–‡æª”
- âœ… å‰µå»º `docs/guides/DEVELOPMENT_WORKFLOW.md`
- âœ… å‰µå»º `docs/guides/QUICK_REFERENCE.md`
- âœ… å‰µå»º `docs/IMPROVEMENT_MEASURES.md`

---

## ğŸ“Š æª¢æŸ¥è…³æœ¬æ¸¬è©¦çµæœ

### âœ… é–‹ç™¼åŠ©æ‰‹ (dev-assistant.cjs)
```bash
npm run dev:assistant
```

**è¼¸å‡ºç¯„ä¾‹**ï¼š
```
ğŸ“ æª¢æ¸¬åˆ°ä»¥ä¸‹ä¿®æ”¹çš„æª”æ¡ˆï¼š
   - package.json
   - scripts/pre-commit-check.bat

âš ï¸  è«‹æ³¨æ„ä»¥ä¸‹ STEERING è¦å‰‡ï¼š

ğŸ“‹ version-consistency.md
   â“ package.jsonã€version.tsã€changelog.ts ç‰ˆæœ¬è™Ÿæ˜¯å¦ä¸€è‡´ï¼Ÿ
   â“ æ˜¯å¦æ·»åŠ äº† changelog è¨˜éŒ„ï¼Ÿ
   â“ æ˜¯å¦åŸ·è¡Œäº† npm run buildï¼Ÿ
```

**ç‹€æ…‹**ï¼šâœ… å®Œå…¨æ­£å¸¸

### âœ… ç‹€æ…‹ç®¡ç†æª¢æŸ¥ (check-state-management.cjs)
```bash
npm run check:state
```

**è¼¸å‡ºç¯„ä¾‹**ï¼š
```
ğŸ“‹ æª¢æŸ¥é—œéµç‹€æ…‹è®Šæ•¸æ˜¯å¦åœ¨ partialize ä¸­ï¼š

âœ… currentAccount: æ­£ç¢ºåŒ…å«åœ¨ partialize ä¸­
âœ… accounts: æ­£ç¢ºåŒ…å«åœ¨ partialize ä¸­
âœ… stocks: æ­£ç¢ºåŒ…å«åœ¨ partialize ä¸­
âœ… isPrivacyMode: æ­£ç¢ºåŒ…å«åœ¨ partialize ä¸­
âœ… rightsAdjustmentMode: æ­£ç¢ºåŒ…å«åœ¨ partialize ä¸­

âœ… ç‹€æ…‹ç®¡ç†é…ç½®æ­£ç¢º
```

**ç‹€æ…‹**ï¼šâœ… å®Œå…¨æ­£å¸¸

### âš ï¸ é™¤æ¬Šæ¯è¨ˆç®—æª¢æŸ¥ (check-rights-calculation.cjs)
```bash
npm run check:rights
```

**ç™¼ç¾çš„å•é¡Œ**ï¼š
- å¤šè¡Œå‡½æ•¸èª¿ç”¨æœƒè¢«èª¤å ±ç‚ºæœªå‚³å…¥åƒæ•¸
- éœ€è¦æ”¹é€²æ­£å‰‡è¡¨é”å¼ä»¥æ”¯æŒå¤šè¡ŒåŒ¹é…

**ç‹€æ…‹**ï¼šâš ï¸ éœ€è¦æ”¹é€²ï¼ˆä½†èƒ½ç™¼ç¾å¯¦éš›å•é¡Œï¼‰

---

## ğŸ¯ ä½¿ç”¨æ–¹å¼

### æ—¥å¸¸é–‹ç™¼æµç¨‹

```bash
# 1ï¸âƒ£ é–‹ç™¼å‰ï¼šæŸ¥çœ‹ç›¸é—œè¦å‰‡
npm run dev:assistant

# 2ï¸âƒ£ é–‹ç™¼ä¸­ï¼šéµå¾ª STEERING è¦å‰‡

# 3ï¸âƒ£ æäº¤å‰ï¼šåŸ·è¡Œå®Œæ•´æª¢æŸ¥
npm run check:all
```

### é‡å°æ€§æª¢æŸ¥

```bash
# åªæª¢æŸ¥ SVG æ ¼å¼
npm run check:svg

# åªæª¢æŸ¥ç‰ˆæœ¬è™Ÿ
npm run check:version

# åªæª¢æŸ¥ç‹€æ…‹ç®¡ç†
npm run check:state

# åªæª¢æŸ¥é™¤æ¬Šæ¯è¨ˆç®—
npm run check:rights
```

---

## ğŸ“‹ æ–°å¢çš„ npm å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ | ç‹€æ…‹ |
|-----|------|------|
| `npm run dev:assistant` | é–‹ç™¼åŠ©æ‰‹ï¼Œæç¤ºç›¸é—œè¦å‰‡ | âœ… æ­£å¸¸ |
| `npm run check:state` | æª¢æŸ¥ç‹€æ…‹ç®¡ç†é…ç½® | âœ… æ­£å¸¸ |
| `npm run check:rights` | æª¢æŸ¥é™¤æ¬Šæ¯è¨ˆç®—ä¸€è‡´æ€§ | âš ï¸ éœ€æ”¹é€² |
| `npm run check:all` | åŸ·è¡Œæ‰€æœ‰æª¢æŸ¥ | âœ… å¯ç”¨ |

---

## ğŸš§ å¾…æ”¹é€²é …ç›®

### 1. é™¤æ¬Šæ¯è¨ˆç®—æª¢æŸ¥è…³æœ¬
**å•é¡Œ**ï¼šå¤šè¡Œå‡½æ•¸èª¿ç”¨æœƒè¢«èª¤å ±

**ç¯„ä¾‹**ï¼š
```typescript
// é€™æ¨£çš„èª¿ç”¨æœƒè¢«èª¤å ±
const updatedStock = await RightsEventService.processStockRightsEvents(
  stock,
  onProgress,
  forceRecalculate  // åƒæ•¸åœ¨ä¸‹ä¸€è¡Œ
);
```

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- æ”¹é€²æ­£å‰‡è¡¨é”å¼ä»¥æ”¯æŒå¤šè¡ŒåŒ¹é…
- æˆ–ä½¿ç”¨ AST è§£æï¼ˆæ›´æº–ç¢ºä½†æ›´è¤‡é›œï¼‰

### 2. è‡ªå‹•ä¿®å¾©åŠŸèƒ½
**å»ºè­°**ï¼šæ·»åŠ  `--fix` é¸é …è‡ªå‹•ä¿®å¾©ç°¡å–®å•é¡Œ

**ç¯„ä¾‹**ï¼š
```bash
npm run check:svg --fix  # è‡ªå‹•ä¿®å¾© SVG path æ ¼å¼
```

### 3. Git Hooks æ•´åˆ
**å»ºè­°**ï¼šè‡ªå‹•åœ¨ git commit å‰åŸ·è¡Œæª¢æŸ¥

**å¯¦ä½œ**ï¼š
```bash
# .git/hooks/pre-commit
#!/bin/sh
npm run check:all || exit 1
```

---

## ğŸ“š æ–‡æª”çµæ§‹

```
docs/
â”œâ”€â”€ IMPROVEMENT_MEASURES.md              # æ”¹é€²æªæ–½ç¸½çµ
â”œâ”€â”€ IMPROVEMENT_IMPLEMENTATION_SUMMARY.md # å¯¦æ–½ç¸½çµï¼ˆæœ¬æ–‡æª”ï¼‰
â””â”€â”€ guides/
    â”œâ”€â”€ DEVELOPMENT_WORKFLOW.md          # å®Œæ•´é–‹ç™¼æµç¨‹
    â””â”€â”€ QUICK_REFERENCE.md               # å¿«é€Ÿåƒè€ƒå¡ç‰‡

scripts/
â”œâ”€â”€ dev-assistant.cjs                    # é–‹ç™¼åŠ©æ‰‹
â”œâ”€â”€ check-state-management.cjs           # ç‹€æ…‹ç®¡ç†æª¢æŸ¥
â”œâ”€â”€ check-rights-calculation.cjs         # é™¤æ¬Šæ¯è¨ˆç®—æª¢æŸ¥
â”œâ”€â”€ check-svg-paths.js                   # SVG æ ¼å¼æª¢æŸ¥
â”œâ”€â”€ check-version-consistency.js         # ç‰ˆæœ¬è™Ÿæª¢æŸ¥
â””â”€â”€ pre-commit-check.bat                 # æäº¤å‰å®Œæ•´æª¢æŸ¥
```

---

## ğŸ¯ é æœŸæ•ˆæœ

### çŸ­æœŸï¼ˆ1-2 é€±ï¼‰
- âœ… é–‹ç™¼å‰è‡ªå‹•æé†’ç›¸é—œè¦å‰‡
- âœ… æäº¤å‰å¼·åˆ¶é€šéæª¢æŸ¥
- ğŸ¯ æ¸›å°‘ 50-80% çš„é‡è¤‡ BUG

### ä¸­æœŸï¼ˆ1-2 æœˆï¼‰
- ğŸ¯ é–‹ç™¼æµç¨‹æ¨™æº–åŒ–
- ğŸ¯ ä»£ç¢¼è³ªé‡é¡¯è‘—æå‡
- ğŸ¯ é‡è¤‡ BUG ç‡ < 10%

### é•·æœŸï¼ˆ3-6 æœˆï¼‰
- ğŸ¯ å½¢æˆè‰¯å¥½çš„é–‹ç™¼ç¿’æ…£
- ğŸ¯ STEERING è¦å‰‡å…§åŒ–
- ğŸ¯ é‡è¤‡ BUG ç‡ < 5%

---

## ğŸ’¡ ä½¿ç”¨å»ºè­°

### çµ¦é–‹ç™¼è€…
1. **æ¯æ¬¡é–‹ç™¼å‰**åŸ·è¡Œ `npm run dev:assistant`
2. **é–‹ç™¼éç¨‹ä¸­**åƒè€ƒ `docs/guides/QUICK_REFERENCE.md`
3. **æäº¤å‰**åŸ·è¡Œ `npm run check:all`

### çµ¦ Kiro
1. **ä¿®æ”¹ä»£ç¢¼å‰**å…ˆåŸ·è¡Œ `npm run dev:assistant` æŸ¥çœ‹ç›¸é—œè¦å‰‡
2. **ä¿®æ”¹ä»£ç¢¼å¾Œ**åŸ·è¡Œå°æ‡‰çš„æª¢æŸ¥å‘½ä»¤
3. **æäº¤å‰**ç¢ºä¿ `npm run check:all` é€šé

---

## ğŸ“Š æˆåŠŸæŒ‡æ¨™

| æŒ‡æ¨™ | ç›®æ¨™ | ç•¶å‰ | ç‹€æ…‹ |
|-----|------|------|------|
| é‡è¤‡ BUG ç‡ | < 5% | ~30% | ğŸš§ æ”¹é€²ä¸­ |
| æäº¤å‰æª¢æŸ¥é€šéç‡ | 100% | - | ğŸ†• æ–°æŒ‡æ¨™ |
| ç‰ˆæœ¬è™Ÿä¸€è‡´æ€§ | 100% | 100% | âœ… é”æˆ |
| è‡ªå‹•åŒ–æª¢æŸ¥è¦†è“‹ç‡ | > 80% | ~60% | ğŸš§ æ”¹é€²ä¸­ |

---

## ğŸ”„ ä¸‹ä¸€æ­¥è¡Œå‹•

### ç«‹å³åŸ·è¡Œ
1. âœ… é–±è®€ `docs/guides/QUICK_REFERENCE.md`
2. âœ… æ¸¬è©¦ `npm run dev:assistant`
3. âœ… æ¸¬è©¦ `npm run check:all`

### æœ¬é€±åŸ·è¡Œ
1. ğŸ”² æ”¹é€² `check-rights-calculation.cjs` ä»¥æ”¯æŒå¤šè¡ŒåŒ¹é…
2. ğŸ”² å°‡æ–°æµç¨‹æ‡‰ç”¨åˆ°å¯¦éš›é–‹ç™¼ä¸­
3. ğŸ”² è¨˜éŒ„é‡åˆ°çš„å•é¡Œå’Œæ”¹é€²å»ºè­°

### æœ¬æœˆåŸ·è¡Œ
1. ğŸ”² çµ±è¨ˆé‡è¤‡ BUG ç‡è®ŠåŒ–
2. ğŸ”² æ·»åŠ æ›´å¤šè‡ªå‹•åŒ–æª¢æŸ¥
3. ğŸ”² è€ƒæ…®å¯¦ä½œ Git Hooks

---

**åˆ¶å®šæ—¥æœŸ**ï¼š2026-01-15  
**ç‰ˆæœ¬**ï¼š1.0.0  
**ç‹€æ…‹**ï¼šå·²å¯¦æ–½ï¼ˆéƒ¨åˆ†åŠŸèƒ½éœ€æ”¹é€²ï¼‰  
**é æœŸæ•ˆæœ**ï¼šæ¸›å°‘ 50-80% é‡è¤‡ BUG
